import{D as P}from"./KTDataTable.c04eda30.js";import{u as H}from"./survey.6b7b571f.js";import"./AddCustomerModal.vue_vue_type_script_lang.c9394b8b.js";import{h as j}from"./dom.d7d6c49b.js";import{S as A}from"./sweetalert2.all.fbc178e9.js";import{d as R,r as p,u as W,G as E,V as z,_ as q,k as n,l as t,I as l,m,y as r,ae as K,p as I,n as a,F as _,J as S,x as N,H as y,B as $,P as Y,o as G}from"./index.40c6202a.js";const J=R({name:"add-survey-modal",components:{},props:["categories","statuses","surveydata","industrytype","inspectiontype","inspectionproperty","registeredproperty"],setup(e,{emit:u}){const w=p(null),V=p(null),h=p(!1),T=localStorage.getItem("lang"),f=p([]);p(!1);const{t:g,te:b}=W(),c=C=>b(C)?g(C):C,o=p({title:"",category:"",detail:"",status:"",industrytype:"",inspectiontype:"",inspectionproperty:"",registeredproperty:"",officefield:""}),d=p({title:[{required:!0,message:c("reqtitle"),trigger:"change"}],detail:[{required:!0,message:c("detailreq"),trigger:"change"}],category:[{required:!0,message:c("selectcategory"),trigger:"change"}],industrytype:[{required:!0,message:c("selectindustrytype"),trigger:"change"}],inspectiontype:[{required:!0,message:c("selectinspectiontype"),trigger:"change"}],inspectionproperty:[{required:!0,message:c("selectinspectionproperty"),trigger:"change"}]});return{newItem:o,rules:d,submit:()=>{!w.value||(e.surveydata,w.value.validate(C=>{if(C){const k=new Date;h.value=!0,E.post("create",{title:o.value.title,detail:o.value.detail,user_id:localStorage.getItem("logged_user_id"),industrytype:o.value.industrytype,inspectiontype:o.value.inspectiontype,inspectionproperty:o.value.inspectionproperty,registeredproperty:o.value.registeredproperty,officefield:o.value.officefield,date:k.getDay()+"."+k.getMonth()+1+"."+k.getFullYear(),questions:[]}).then(({data:v})=>{e.surveydata.push({id:v,title:o.value.title,detail:o.value.detail,answers_count:0,category:o.value.category,date:k.getDay()+"."+k.getMonth()+1+"."+k.getFullYear(),questions:[]}),setTimeout(()=>{var L;h.value=!1,o.value={title:"",category:"",detail:"",status:"",industrytype:"",inspectiontype:"",inspectionproperty:"",registeredproperty:"",officefield:""},(L=w.value)==null||L.resetFields(),A.fire({text:c("savesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:c("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{j(V.value),z.push({name:"survey-details",params:{id:v}})})},2e3)})}}))},formRef:w,loading:h,addSurveyModalRef:V,translate:c,onRegisteredChange:C=>{E.post("showRegisteredFieldId",{id:C}).then(({data:k})=>{f.value=k,console.log("fields",k)})},lang:T,officelist:f}}}),Q={class:"modal fade",id:"kt_modal_add_survey",ref:"addSurveyModalRef",tabindex:"-1","aria-hidden":"true"},X={class:"modal-dialog modal-dialog-centered mw-650px"},Z={class:"modal-content"},x={class:"modal-header",id:"kt_modal_add_customer_header"},ee={class:"fw-bold"},te={id:"kt_modal_add_survey_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},se={class:"svg-icon svg-icon-1"},oe={class:"modal-body py-10 px-lg-17"},ae={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_survey_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_survey_header","data-kt-scroll-wrappers":"#kt_modal_add_survey_scroll","data-kt-scroll-offset":"300px"},ne={class:"fv-row mb-7"},le={class:"required fs-6 fw-semobold mb-2"},re={class:"fv-row mb-7"},de={class:"required fs-6 fw-semobold mb-2"},ie={class:"d-flex flex-column mb-7 fv-row"},ue={class:"fs-6 fw-semobold mb-2"},pe={class:"required"},ce={class:"d-flex flex-column mb-7 fv-row"},me={class:"fs-6 fw-semobold mb-2"},ye={class:"required"},fe={class:"d-flex flex-column mb-7 fv-row"},ge={class:"fs-6 fw-semobold mb-2"},be={class:"required"},_e={class:"d-flex flex-column mb-7 fv-row"},he={class:"fs-6 fw-semobold mb-2"},ve={class:""},we={class:"d-flex flex-column mb-7 fv-row"},ke={class:"fs-6 fw-semobold mb-2"},$e={class:""},Ie={class:"modal-footer flex-center"},Se={type:"reset",id:"kt_modal_add_survey_cancel",class:"btn btn-light me-3"},Ve=["data-kt-indicator"],Ce={key:0,class:"indicator-label"},Ee={class:"svg-icon svg-icon-3 ms-2 me-0"},Te={key:1,class:"indicator-progress"},Ne=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Ae(e,u,w,V,h,T){const f=I("inline-svg"),g=I("el-input"),b=I("el-form-item"),c=I("el-option"),o=I("el-select"),d=I("el-form");return a(),n("div",Q,[t("div",X,[t("div",Z,[t("div",x,[t("h2",ee,l(e.translate("addnewsurvey")),1),t("div",te,[t("span",se,[m(f,{src:"/media/icons/duotune/arrows/arr061.svg"})])])]),m(d,{onSubmit:u[7]||(u[7]=K(s=>e.submit(),["prevent"])),model:e.newItem,rules:e.rules,ref:"formRef"},{default:r(()=>[t("div",oe,[t("div",ae,[t("div",ne,[t("label",le,l(e.translate("title")),1),m(b,{prop:"title"},{default:r(()=>[m(g,{modelValue:e.newItem.title,"onUpdate:modelValue":u[0]||(u[0]=s=>e.newItem.title=s),type:"text",name:"title",placeholder:""},null,8,["modelValue"])]),_:1})]),t("div",re,[t("label",de,l(e.translate("detail")),1),m(b,{prop:"detail"},{default:r(()=>[m(g,{modelValue:e.newItem.detail,"onUpdate:modelValue":u[1]||(u[1]=s=>e.newItem.detail=s),type:"textarea",rows:"3",name:"detail",placeholder:"Type Target Details"},null,8,["modelValue"])]),_:1})]),t("div",ie,[t("label",ue,[t("span",pe,l(e.translate("industrytype")),1)]),m(b,{prop:"industrytype"},{default:r(()=>[m(o,{modelValue:e.newItem.industrytype,"onUpdate:modelValue":u[2]||(u[2]=s=>e.newItem.industrytype=s),options:e.industrytype,"popper-append-to-body":!1,teleported:!1},{default:r(()=>[(a(!0),n(_,null,S(e.industrytype,s=>(a(),n(_,{key:e.category},[e.lang=="en"||e.lang=="enrtl"?(a(),N(c,{key:0,value:s.id,label:s.name_en},{default:r(()=>[y(l(s.name_en),1)]),_:2},1032,["value","label"])):(a(),N(c,{key:1,value:s.id,label:s.name_ar},{default:r(()=>[y(l(s.name_ar),1)]),_:2},1032,["value","label"]))],64))),128))]),_:1},8,["modelValue","options"])]),_:1})]),t("div",ce,[t("label",me,[t("span",ye,l(e.translate("inspectiontype")),1)]),m(b,{prop:"inspectiontype"},{default:r(()=>[m(o,{modelValue:e.newItem.inspectiontype,"onUpdate:modelValue":u[3]||(u[3]=s=>e.newItem.inspectiontype=s),options:e.inspectiontype.name_en,"popper-append-to-body":!1,teleported:!1},{default:r(()=>[(a(!0),n(_,null,S(e.inspectiontype,s=>(a(),n(_,{key:s},[e.lang=="en"||e.lang=="enrtl"?(a(),N(c,{key:0,value:s.id,label:s.name_en},{default:r(()=>[y(l(s.name_en),1)]),_:2},1032,["value","label"])):(a(),N(c,{key:1,value:s.id,label:s.name_ar},{default:r(()=>[y(l(s.name_ar),1)]),_:2},1032,["value","label"]))],64))),128))]),_:1},8,["modelValue","options"])]),_:1})]),t("div",fe,[t("label",ge,[t("span",be,l(e.translate("inspectionpropertytype")),1)]),m(b,{prop:"inspectionproperty"},{default:r(()=>[m(o,{modelValue:e.newItem.inspectionproperty,"onUpdate:modelValue":u[4]||(u[4]=s=>e.newItem.inspectionproperty=s),options:e.inspectionproperty,"popper-append-to-body":!1,teleported:!1},{default:r(()=>[(a(!0),n(_,null,S(e.inspectionproperty,s=>(a(),n(_,{key:s},[e.lang=="en"||e.lang=="enrtl"?(a(),N(c,{key:0,value:s.id,label:s.propertyname_en},{default:r(()=>[y(l(s.propertyname_en),1)]),_:2},1032,["value","label"])):(a(),N(c,{key:1,value:s.id,label:s.propertyname_ar},{default:r(()=>[y(l(s.propertyname_ar),1)]),_:2},1032,["value","label"]))],64))),128))]),_:1},8,["modelValue","options"])]),_:1})]),t("div",_e,[t("label",he,[t("span",ve,l(e.translate("registeredproperties")),1)]),m(b,{prop:"registeredproperty"},{default:r(()=>[m(o,{modelValue:e.newItem.registeredproperty,"onUpdate:modelValue":u[5]||(u[5]=s=>e.newItem.registeredproperty=s),options:e.registeredproperty,"popper-append-to-body":!1,teleported:!1,onChange:e.onRegisteredChange},{default:r(()=>[(a(!0),n(_,null,S(e.registeredproperty,s=>(a(),N(c,{key:s.id,value:s.id,label:s.building_no},{default:r(()=>[y(l(s.building_no),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","options","onChange"])]),_:1})]),t("div",we,[t("label",ke,[t("span",$e,l(e.translate("offices")),1)]),m(b,{prop:"officefield"},{default:r(()=>[m(o,{modelValue:e.newItem.officefield,"onUpdate:modelValue":u[6]||(u[6]=s=>e.newItem.officefield=s),options:e.officelist,"popper-append-to-body":!1,teleported:!1},{default:r(()=>[(a(!0),n(_,null,S(e.officelist,s=>(a(),N(c,{key:s.id,value:s.id,label:s.property_list},{default:r(()=>[y(l(s.property_list),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","options"])]),_:1})])])]),t("div",Ie,[t("button",Se,l(e.translate("cancel")),1),t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?$("",!0):(a(),n("span",Ce,[y(l(e.translate("save"))+" ",1),t("span",Ee,[m(f,{src:"/media/icons/duotune/arrows/arr064.svg"})])])),e.loading?(a(),n("span",Te,[y(l(e.translate("pleasewait"))+" ",1),Ne])):$("",!0)],8,Ve)])]),_:1},8,["model","rules"])])])],512)}const Le=q(J,[["render",Ae]]),Be=R({name:"surveylistitem",props:["data","selectedItems"],components:{},setup(e,{emit:u}){const w=p(e.data),V=p([e.selectedItems]);return{body:p('Writing headlines for blog posts is much science and probably cool audience. <a href="#" class="fw-bold">Learn more</a>.'),data:w,selectedItems:V,toggleItem:(f,g)=>{u("toggle-item",f,g)}}}}),Me={class:"card-body pt-0"},Re={class:"d-flex flex-column flex-md-row justify-content-between align-items-md-center pb-2 p-3 mb-2"},qe={class:"text-gray-400 fs-5 fw-semobold mb-13"},De={class:"text-gray-400 fs-5 fw-semobold mb-13"},We={class:"w-15 w-xs-100"},Fe=["variant"],Oe={class:"card-body pt-1"},Ue=["innerHTML"];function Pe(e,u,w,V,h,T){const f=I("router-link");return a(),n("div",{onClick:u[0]||(u[0]=g=>e.toggleItem(g,e.data.id)),class:Y([{"d-flex mb-3":!0,active:e.selectedItems.includes(e.data.id)},"card card-flush pt-3 mb-5 mb-lg-10 card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center pb-2"])},[t("div",Me,[t("div",Re,[m(f,{to:{name:"survey-details",params:{id:e.data.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:r(()=>[t("h2",null,l(e.data.title),1)]),_:1},8,["to"]),t("div",qe,[t("span",null,l(e.data.category),1)]),t("p",De,[t("span",null,l(e.data.date),1)]),t("div",We,[t("span",{class:"badge badge-light-primary ms-5",variant:e.data.labelColor},l(e.data.label),9,Fe)])]),t("div",Oe,[t("p",{class:"mb-0",innerHTML:e.data.detail},null,8,Ue)])])],2)}const He=q(Be,[["render",Pe]]),je=R({name:"survey",components:{Datatable:P,SurveyAddNewModal:Le,SurveyListItem:He},setup(){const e=p([{columnName:"title",columnLabel:"title",sortEnabled:!0,columnWidth:175},{columnName:"thedetails",columnLabel:"detail",sortEnabled:!0,columnWidth:230},{columnName:"industrytype",columnLabel:"industrytype",sortEnabled:!0,columnWidth:175},{columnName:"inspectiontype",columnLabel:"inspectiontype",sortEnabled:!0,columnWidth:175},{columnName:"inspectionpropertytype",columnLabel:"inspectionproperty",sortEnabled:!0,columnWidth:175},{columnName:"registeredproperty",columnLabel:"registeredproperty",sortEnabled:!0,columnWidth:175},{columnName:"offices",columnLabel:"offices",sortEnabled:!0,columnWidth:175},{columnName:"thedate",columnLabel:"date",sortEnabled:!0,columnWidth:230},{columnName:"action",columnLabel:"action",sortEnabled:!0,columnWidth:100}]);p([{column:"title",label:"Title"},{column:"category",label:"Category"},{column:"label",label:"Label"},{column:"status",label:"Status"}]);const u=p([{label:"\u0645\u0648\u0627\u0631\u062F \u0628\u0634\u0631\u064A\u0629",value:"\u0645\u0648\u0627\u0631\u062F \u0628\u0634\u0631\u064A\u0629"},{label:"\u0627\u0645\u0627\u0643\u0646",value:"\u0627\u0645\u0627\u0643\u0646"},{label:"\u0627\u062C\u0647\u0632\u0629",value:"Hardware"}]),w=p([{label:"EDUCATION",value:"EDUCATION",color:"secondary"},{label:"NEW FRAMEWORK",value:"NEW FRAMEWORK",color:"primary"},{label:"PERSONAL",value:"PERSONAL",color:"info"}]),V=p([{text:"ACTIVE",value:"ACTIVE"},{text:"COMPLETED",value:"COMPLETED"}]),h=p([]);p(!0);const T=p([]),f=p([]),g=p([]),b=p([]),c=p([]),o=p([]),d=p([]),s=localStorage.getItem("logged_user_id");H();const D=localStorage.getItem("lang"),{t:C,te:k}=W(),v=i=>k(i)?C(i):i;return G(()=>{E.get("show").then(({data:i})=>{h.value=i.data}).catch(({response:i})=>{}),E.post("showIndustryType",{user_id:s}).then(({data:i})=>{f.value=i}).catch(({response:i})=>{}),E.get("showAllInspectionTypes").then(({data:i})=>{g.value=i}).catch(({response:i})=>{}),E.post("showInspectionProperty",{user_id:s}).then(({data:i})=>{b.value=i}).catch(({response:i})=>{}),E.post("showRegisteredProperty",{user_id:s}).then(({data:i})=>{c.value=i}).catch(({response:i})=>{}),E.get("showRegisteredFields").then(({data:i})=>{o.value=i}).catch(({response:i})=>{})}),{surveydata:h,selectedItems:d,categories:u,statuses:V,labels:w,selectedIds:T,onItemSelect:i=>{T.value=i},tableHeader:e,translate:v,industrytype:f,inspectiontype:g,inspectionproperty:b,registeredproperty:c,lang:D,offices:o,deleterow:(i,B)=>{console.log(B,i),A.fire({title:v("areyousure"),text:v("notretrivedata"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:v("yesdelete"),cancelButtonText:v("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(F=>{if(F.value==!0){let M="0";i=="0"?M="1":M="0",E.post("isDeleteTemplate",{delete:M,id:B}).then(({data:O})=>{console.log(O),h.value=h.value.filter(U=>U.id!==B),setTimeout(()=>{A.fire({text:v("deletesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:v("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}else setTimeout(()=>{A.fire({text:v("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:v("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}}}}),ze={class:"card"},Ke={class:"card-header border-0 pt-6"},Ye=t("div",{class:"card-title"},null,-1),Ge={class:"card-toolbar"},Je={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Qe={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_survey"},Xe={class:"svg-icon svg-icon-2"},Ze=t("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[t("div",{class:"fw-bold me-5"},[t("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),y("Selected ")]),t("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Delete Selected ")],-1),xe={class:"card-body pt-0"},et={key:0},tt={key:1},st={key:1},ot={key:0},at={key:1},nt={key:1},lt={key:0},rt={key:1},dt={key:1},it={key:0},ut={key:1},pt={key:0},ct={key:1},mt=t("i",{class:"fa fa-pencil text-primary fs-3 m-2","aria-hidden":"true"},null,-1),yt=["onClick"];function ft(e,u,w,V,h,T){const f=I("inline-svg"),g=I("router-link"),b=I("Datatable"),c=I("SurveyAddNewModal");return a(),n(_,null,[t("div",ze,[t("div",Ke,[Ye,t("div",Ge,[e.selectedIds.length===0?(a(),n("div",Je,[t("button",Qe,[t("span",Xe,[m(f,{src:"/media/icons/duotune/arrows/arr075.svg"})]),y(" "+l(e.translate("addnew")),1)])])):$("",!0),Ze])]),t("div",xe,[m(b,{onOnItemsSelect:e.onItemSelect,data:e.surveydata,header:e.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id"},{title:r(({row:o})=>[m(g,{to:{name:"survey-details",params:{id:o.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:r(()=>[y(l(o.title),1)]),_:2},1032,["to"])]),detail:r(({row:o})=>[y(l(o.detail),1)]),industrytype:r(({row:o})=>[e.industrytype!==""&&e.industrytype.length>0?(a(!0),n(_,{key:0},S(e.industrytype,d=>(a(),n("span",{key:d},[d.id==o.industrytype&&e.lang=="en"||e.lang=="enrtl"?(a(),n("span",et,l(d.name_en),1)):$("",!0),d.id==o.industrytype&&e.lang=="ar"?(a(),n("span",tt,l(d.name_ar),1)):$("",!0)]))),128)):(a(),n("span",st))]),inspectiontype:r(({row:o})=>[e.inspectiontype!==""&&e.inspectiontype.length>0?(a(!0),n(_,{key:0},S(e.inspectiontype,d=>(a(),n("span",{key:d},[d.id==o.inspectiontype&&e.lang=="en"||e.lang=="enrtl"?(a(),n("span",ot,l(d.name_en),1)):$("",!0),d.id==o.inspectiontype&&e.lang=="ar"?(a(),n("span",at,l(d.name_ar),1)):$("",!0)]))),128)):(a(),n("span",nt))]),inspectionproperty:r(({row:o})=>[e.inspectionproperty!==""&&e.inspectionproperty.length>0?(a(!0),n(_,{key:0},S(e.inspectionproperty,d=>(a(),n("span",{key:d},[d.id==o.inspectionproperty&&e.lang=="en"||e.lang=="enrtl"?(a(),n("span",lt,l(d.propertyname_en),1)):$("",!0),d.id==o.inspectionproperty&&e.lang=="ar"?(a(),n("span",rt,l(d.propertyname_ar),1)):$("",!0)]))),128)):(a(),n("span",dt))]),registeredproperty:r(({row:o})=>[e.registeredproperty!==""&&e.registeredproperty.length>0?(a(!0),n(_,{key:0},S(e.registeredproperty,d=>(a(),n("span",{key:d},[d.id==o.registeredproperty?(a(),n("span",it,l(d.building_no),1)):$("",!0)]))),128)):(a(),n("span",ut))]),offices:r(({row:o})=>[e.offices!==""&&e.offices.length>0?(a(!0),n(_,{key:0},S(e.offices,d=>(a(),n("span",{key:d},[d.id==o.officefield?(a(),n("span",pt,l(d.property_list),1)):$("",!0)]))),128)):(a(),n("span",ct))]),date:r(({row:o})=>[y(l(o.date),1)]),action:r(({row:o})=>[m(g,{to:{name:"survey-details",params:{id:o.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:r(()=>[mt]),_:2},1032,["to"]),t("i",{class:"fa fa-trash text-danger fs-3 m-2","aria-hidden":"true",onClick:d=>e.deleterow(o.is_deleted,o.id)},null,8,yt)]),_:1},8,["onOnItemsSelect","data","header"])])]),m(c,{categories:e.categories,surveydata:e.surveydata,labels:e.labels,statuses:e.statuses,industrytype:e.industrytype,inspectiontype:e.inspectiontype,inspectionproperty:e.inspectionproperty,registeredproperty:e.registeredproperty},null,8,["categories","surveydata","labels","statuses","industrytype","inspectiontype","inspectionproperty","registeredproperty"])],64)}const $t=q(je,[["render",ft]]);export{$t as default};
