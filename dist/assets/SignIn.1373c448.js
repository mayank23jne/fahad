import{d as E,ab as M,aA as q,ac as I,K as k,u as S,r as D,o as T,i as L,Q as N,S as R,U as z,L as H,_ as J,k as f,l as e,I as a,F as $,J as K,m as c,y as P,p as b,n as h,H as B}from"./index.40c6202a.js";import{S as F}from"./sweetalert2.all.fbc178e9.js";import{c as Q,a as w,b as U}from"./object.fb242430.js";const j=E({name:"sign-in",components:{Field:M,VForm:q,ErrorMessage:I},setup(){const s=k(),u=H(),{t:v,te:y}=S(),l=S();k();const r=D(null),n=t=>y(t)?v(t):t,d=Q().shape({email_or_phone:w().required(n("emailmobile")).test("email_or_phone",n("emailphoneinvalid"),t=>p(t)||i(parseInt(t!=null?t:"0"))),password:w().required(n("passreq"))}),p=t=>w().email().isValidSync(t),i=t=>U().integer().positive().test(o=>!!(o&&o.toString().length>=8&&o.toString().length<=14)).isValidSync(t),g=async t=>{var m;t={email:t.email_or_phone,password:t.password},s.logout(),r.value&&(r.value.disabled=!0,r.value.setAttribute("data-kt-indicator","on")),await s.login(t);const o=s.errors;o?F.fire({text:o,icon:"error",buttonsStyling:!1,confirmButtonText:n("tryagain"),heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}).then(()=>{s.errors=""}):F.fire({text:n("successloggedin"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-primary"}}).then(()=>{u.push({name:"dashboard"})}),(m=r.value)==null||m.removeAttribute("data-kt-indicator"),r.value.disabled=!1},_={en:{id:"en",flag:"/media/flags/united-states.svg",name:"English",direction:"ltr"},enrtl:{id:"enrtl",flag:"/media/flags/united-states.svg",name:"English RTL",direction:"rtl"},ar:{id:"ar",flag:"/media/flags/saudi-arabia.svg",name:"Arabic",direction:"rtl"}};T(()=>{});const x=t=>{localStorage.setItem("lang",t),l.locale.value=t},V=L(()=>l.locale.value),A=L(()=>_[l.locale.value]),C=(t,o)=>{const m=R().direction;o!==m&&z(o),x(t)};return N(l.locale,(t,o)=>{o!==t&&u.go(0)}),{onSubmitLogin:g,login:d,submitButton:r,setLang:x,currentLanguage:V,currentLangugeLocale:A,countries:_,changeLocale:C,translate:n}}}),G={class:"dropdown"},O={class:"dropdown-toggle btn btn-icon btn-active-light btn-active-color-primary btn-custom w-150px h-30px w-md-150px h-md-40px",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},W={class:"symbol symbol-20px me-4"},X=["src"],Y={style:{"font-size":"14px"}},Z={class:"dropdown-menu fw-semibold py-4 fs-base w-175px","aria-labelledby":"dropdownMenuButton1"},ee=["onClick"],te={class:"symbol symbol-20px me-4"},se=["src"],oe={class:"w-lg-500px p-10"},ne={class:"text-center mb-10"},ae={class:"text-dark mb-3"},re={class:"fv-row mb-10"},ie={class:"form-label fs-6 fw-bold required text-dark"},le={class:"fv-plugins-message-container"},ce={class:"fv-help-block",style:{color:"#d72626"}},de={class:"fv-row mb-10"},me={class:"d-flex flex-stack mb-2"},ue={class:"form-label fw-bold required text-dark fs-6 mb-0"},pe={class:"fv-plugins-message-container"},ge={class:"fv-help-block",style:{color:"#d72626"}},_e={class:"text-center"},fe={tabindex:"3",type:"submit",ref:"submitButton",id:"kt_sign_in_submit",class:"btn btn-lg btn-primary w-100 mb-5"},be={class:"indicator-label"},he={class:"indicator-progress"},we=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function ve(s,u,v,y,l,r){const n=b("Field"),d=b("ErrorMessage"),p=b("VForm");return h(),f($,null,[e("div",G,[e("button",O,[e("span",W,[e("img",{class:"w-20px h-20px rounded-1 ms-2",src:s.currentLangugeLocale.flag,alt:"metronic"},null,8,X)]),e("span",Y,a(s.currentLangugeLocale.name),1)]),e("ul",Z,[(h(!0),f($,null,K(s.countries,(i,g)=>(h(),f("li",{class:"px-3",key:g},[e("a",{class:"dropdown-item",href:"#",onClick:_=>s.changeLocale(i.id,i.direction)},[e("span",te,[e("img",{class:"rounded-1",src:i.flag,alt:"metronic"},null,8,se)]),B(" "+a(i.name),1)],8,ee)]))),128))])]),e("div",oe,[c(p,{class:"form w-100",id:"kt_login_signin_form",onSubmit:s.onSubmitLogin,"validation-schema":s.login},{default:P(()=>[e("div",ne,[e("h1",ae,a(s.$t("signin")),1)]),e("div",re,[e("label",ie,a(s.$t("e_mail"))+"/"+a(s.$t("mobile")),1),c(n,{tabindex:"1",class:"form-control form-control-lg form-control-solid",type:"text",name:"email_or_phone",autocomplete:"off"}),e("div",le,[e("div",ce,[c(d,{name:"email_or_phone"})])])]),e("div",de,[e("div",me,[e("label",ue,a(s.$t("password")),1)]),c(n,{tabindex:"2",class:"form-control form-control-lg form-control-solid",type:"password",name:"password",autocomplete:"off"}),e("div",pe,[e("div",ge,[c(d,{name:"password"})])])]),e("div",_e,[e("button",fe,[e("span",be,a(s.$t("continue")),1),e("span",he,[B(a(s.$t("pleasewait"))+" ",1),we])],512)])]),_:1},8,["onSubmit","validation-schema"])])],64)}const Se=J(j,[["render",ve]]);export{Se as default};
