import{D as L}from"./KTDataTable.c04eda30.js";import{C as M}from"./CategoryAddNewModal.aa6e8651.js";import{d as V,u as W,r,o as j,G as b,V as D,_ as H,k as i,l as e,I as d,m as w,H as v,y,F as O,p as C,n as u}from"./index.40c6202a.js";import{S as m}from"./sweetalert2.all.fbc178e9.js";import"./dom.d7d6c49b.js";const G=V({name:"category",components:{Datatable:L,CategoryAddNewModal:M},setup(){const{t:o,te:h}=W(),B=r([{columnName:"serialno",columnLabel:"id",sortEnabled:!0,columnWidth:175},{columnName:"unitname",columnLabel:"category",sortEnabled:!0,columnWidth:230},{columnName:"status",columnLabel:"status",sortEnabled:!0,columnWidth:50},{columnName:"action",columnLabel:"action",sortEnabled:!0,columnWidth:230}]),p=r([]),S=r(""),x=r(""),_=r({}),l=r([]),k=localStorage.getItem("lang");j(()=>{b.get("category").then(({data:t})=>{l.value=t})});const s=(t,n)=>{let c="0";t=="0"?c="1":c="0",b.post("category/changeStatus",{status:c,id:n}).then(({data:g})=>{setTimeout(()=>{m.fire({text:a("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:a("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{D.go(0)})},2e3)})},f=t=>{let n=t.target.value;return b.post("category/archive",{val:n}).then(({data:c})=>{l.value=c}).catch(({response:c})=>{})},I=(t,n)=>{m.fire({title:a("areyousure"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:a("yesarchive"),cancelButtonText:a("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(c=>{if(c.value==!0){let g="0";t=="0"?g="1":g="0",b.post("category/isDelete",{delete:g,id:n}).then(({data:gt})=>{l.value=l.value.filter(F=>F.id!==n),setTimeout(()=>{m.fire({text:a("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:a("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}else setTimeout(()=>{m.fire({text:a("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:a("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},A=t=>{console.log("id",t),D.push({name:"editcategory",params:{id:t}})},N=()=>{p.value.forEach(t=>{T(t)}),p.value.length=0},T=t=>{for(let n=0;n<l.value.length;n++)l.value[n].id===t&&l.value.splice(n,1)},$=r(""),E=t=>{p.value=t},a=t=>h(t)?o(t):t;return{tableData:l,tableHeader:B,deleterow:t=>{m.fire({title:a("areyousure"),text:a("notretrivedata"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:a("yesdelete"),cancelButtonText:a("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-primary"}}).then(n=>{n.value==!0?b.delete("category/delete/"+t).then(({data:c})=>{l.value=l.value.filter(g=>g.id!==t),setTimeout(()=>{m.fire({text:a("deletesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:a("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}):setTimeout(()=>{m.fire({text:a("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:a("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},deleteCustomer:T,search:$,selectedIds:p,deleteFewCustomers:N,onItemSelect:E,translate:a,editrow:A,statuschange:s,archivechange:I,showData:f,editid:S,editdata:_,updateItem:()=>{},edittype:x,lang:k}}}),q={class:"card"},z={class:"card-header border-0 pt-6"},J=e("div",{class:"card-title"},null,-1),K={class:"card-toolbar"},P={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Q={class:"d-flex flex-wrap my-1"},R={class:"m-0"},U={class:"symbol symbol-20px me-4",value:"0",selected:""},X={value:"1"},Y={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_category"},Z={class:"svg-icon svg-icon-2"},tt={key:1,class:"d-flex justify-content-end align-items-center","data-kt-customer-table-toolbar":"selected"},et={class:"fw-bold me-5"},st={class:"me-2"},ot=e("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[e("div",{class:"fw-bold me-5"},[e("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),v("Selected ")]),e("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Delete Selected ")],-1),at={class:"card-body pt-0"},nt={key:0},lt={key:1},ct=["onClick"],rt=["onClick"],it=["onClick"],dt=["onClick"],ut=["onClick"];function mt(o,h,B,p,S,x){const _=C("inline-svg"),l=C("Datatable"),k=C("CategoryAddNewModal");return u(),i(O,null,[e("div",q,[e("div",z,[J,e("div",K,[o.selectedIds.length===0?(u(),i("div",P,[e("div",Q,[e("div",R,[e("select",{name:"status","data-control":"select2","data-hide-search":"true",class:"form-select form-select-white form-select-sm fw-bold w-150px h-30px w-md-150px h-md-40px mr-2",onChange:h[0]||(h[0]=s=>o.showData(s)),style:{"margin-right":"20px","margin-left":"20px"}},[e("option",U,d(o.translate("active")),1),e("option",X,d(o.translate("archive")),1)],32)])]),e("button",Y,[e("span",Z,[w(_,{src:"/media/icons/duotune/arrows/arr075.svg"})]),v(d(o.translate("addusergroup")),1)])])):(u(),i("div",tt,[e("div",et,[e("span",st,d(o.selectedIds.length),1),v("Selected ")]),e("button",{type:"button",class:"btn btn-danger",onClick:h[1]||(h[1]=s=>o.deleteFewCustomers())}," Delete Selected ")])),ot])]),e("div",at,[w(l,{onOnItemsSelect:o.onItemSelect,data:o.tableData,header:o.tableHeader,"enable-items-per-page-dropdown":!0},{id:y(({row:s})=>[v(d(s.id),1)]),category:y(({row:s})=>[o.lang==="ar"?(u(),i("span",nt,d(s.category),1)):(u(),i("span",lt,d(s.category_en),1))]),status:y(({row:s})=>[s.status==1?(u(),i("i",{key:0,class:"fa fa-unlock text-success fs-3","aria-hidden":"true",onClick:f=>o.statuschange(s.status,s.id)},null,8,ct)):(u(),i("i",{key:1,class:"fa fa-lock text-danger fs-3","aria-hidden":"true",onClick:f=>o.statuschange(s.status,s.id)},null,8,rt))]),action:y(({row:s})=>[e("i",{class:"fa fa-archive text-warning fs-3 m-2","aria-hidden":"true",onClick:f=>o.archivechange(s.is_deleted,s.id)},null,8,it),e("i",{class:"fa fa-pencil text-primary fs-3 m-2","aria-hidden":"true",onClick:f=>o.editrow(s.id)},null,8,dt),e("i",{class:"fa fa-trash text-danger fs-3 m-2","aria-hidden":"true",onClick:f=>o.deleterow(s.id)},null,8,ut)]),_:1},8,["onOnItemsSelect","data","header"])])]),w(k,{items:o.tableData},null,8,["items"])],64)}const kt=H(G,[["render",mt]]);export{kt as default};
