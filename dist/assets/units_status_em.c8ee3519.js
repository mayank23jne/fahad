import{D as k}from"./KTDataTable.c04eda30.js";import"./Dropdown3.vue_vue_type_script_lang.c4c01141.js";import{d as E,ab as F,r as n,u as T,o as L,G as p,V as P,_ as W,k as S,l as o,m as b,I as r,y as i,F as I,p as w,n as B,H as m}from"./index.40c6202a.js";import{c as H}from"./customers.e552c072.js";import{a as U}from"./index.30a6773f.js";const A=E({name:"units_status_em",props:["id","template_id"],components:{Datatable:k,Field:F},setup(t){const l=n([{columnName:"sample",columnLabel:"Template_Title",sortEnabled:!0,columnWidth:150},{columnName:"formdetails",columnLabel:"Template_Detail",sortEnabled:!0,columnWidth:150},{columnName:"unitno",columnLabel:"unit_number",sortEnabled:!0,columnWidth:150},{columnName:"nationality",columnLabel:"nationality",sortEnabled:!0,columnWidth:150},{columnName:"noofpilgrims",columnLabel:"pilgrims",sortEnabled:!0,columnWidth:150},{columnName:"successrate",columnLabel:"SuccessPercentage",sortEnabled:!0,columnWidth:150},{columnName:"mistakepercentage",columnLabel:"FailedPercentage",sortEnabled:!0,columnWidth:150},{columnName:"theevent",columnLabel:"actions",sortEnabled:!0,columnWidth:150},{columnName:"printing ",columnLabel:"print",sortEnabled:!0,columnWidth:150}]),_=n(H),v=n([]),h=n(""),g=n(""),s=n([]),c=n(1),e=n(0),u=n(0),d=n(!0),f=n(""),y=n(""),$=n(""),{t:N,te:D}=T(),V=a=>D(a)?N(a):a;return L(()=>{t.id!=null?p.get(`companyForms/${t.id}?page=${c.value}&sortDesc=${d.value}`).then(({data:a})=>{s.value=a.data,e.value=a.Count,u.value=15}):t.template_id!=null?p.get(`templateForms/${t.template_id}?page=${c.value}&sortDesc=${d.value}`).then(({data:a})=>{s.value=a.data,e.value=a.Count,u.value=15}):p.get(`units_status/emergency?page=${c.value}&sortDesc=${d.value}`).then(({data:a})=>{s.value=a.data,e.value=a.Count,u.value=15})}),{items:s,tableHeader:l,selectedIds:v,title:h,detail:g,tableData:_,gotopage:a=>{P.push({name:"success",params:{id:a}})},gotoprint:a=>{window.open(`https://forms.innovativeideasbox.com/API/api/print/${a}`,"_blank")},client_name:f,unit_number:y,template_name:$,searchresults:()=>{p.get(`units_status/emergency?page=${c.value}&sortDesc=${d.value}&template_name=${$.value}&client_name=${f.value}&unit_number=${y.value}`).then(a=>{s.value=a.data,e.value=a.data.Count,u.value=15})},sort:a=>{const C=a.order==="asc";a.label&&U(s.value,a.label,{reverse:C})},translate:V}}}),O={class:"card mb-8"},G={class:"card-body"},M={class:"row"},R={class:"col-md-3"},j={class:"col-md-3"},q={class:"col-md-3"},z={class:"col-md-3 text-center"},J={class:"card"},K={class:"card-body pt-6"},Q=["onClick"],X=["onClick"];function Y(t,l,_,v,h,g){const s=w("Field"),c=w("Datatable");return B(),S(I,null,[o("div",O,[o("div",G,[o("div",M,[o("div",R,[b(s,{type:"text",class:"form-control form-control-solid",name:"firstName",modelValue:t.template_name,"onUpdate:modelValue":l[0]||(l[0]=e=>t.template_name=e),placeholder:t.translate("searchbymodelname")},null,8,["modelValue","placeholder"])]),o("div",j,[b(s,{type:"text",class:"form-control form-control-solid",name:"firstName",modelValue:t.unit_number,"onUpdate:modelValue":l[1]||(l[1]=e=>t.unit_number=e),placeholder:t.translate("searchbyunitno")},null,8,["modelValue","placeholder"])]),o("div",q,[b(s,{type:"text",class:"form-control form-control-solid",name:"firstName",modelValue:t.client_name,"onUpdate:modelValue":l[2]||(l[2]=e=>t.client_name=e),placeholder:t.translate("searchbyinsname")},null,8,["modelValue","placeholder"])]),o("div",z,[o("button",{class:"btn btn-primary",onClick:l[3]||(l[3]=(...e)=>t.searchresults&&t.searchresults(...e))},r(t.translate("search")),1)])])])]),o("div",J,[o("div",K,[b(c,{onOnSort:t.sort,data:t.items,header:t.tableHeader,"enable-items-per-page-dropdown":!0},{Template_Title:i(({row:e})=>[m(r(e.Template_Title),1)]),Template_Detail:i(({row:e})=>[m(r(e.Template_Detail),1)]),unit_number:i(({row:e})=>[m(r(e.unit_number),1)]),nationality:i(({row:e})=>[m(r(e.nationality),1)]),pilgrims:i(({row:e})=>[m(r(e.pilgrims),1)]),SuccessPercentage:i(({row:e})=>[m(r(e.SuccessPercentage),1)]),FailedPercentage:i(({row:e})=>[m(r(e.FailedPercentage),1)]),actions:i(({row:e})=>[o("button",{onClick:u=>t.gotopage(e.answer_id),class:"btn btn-sm btn-light btn-active-light-primary"},r(t.translate("details")),9,Q)]),print:i(({row:e})=>[o("button",{onClick:u=>t.gotoprint(e.answer_id),class:"btn btn-sm btn-light btn-active-light-primary"},r(t.translate("print")),9,X)]),_:1},8,["onOnSort","data","header"])])])],64)}const re=W(A,[["render",Y]]);export{re as default};
