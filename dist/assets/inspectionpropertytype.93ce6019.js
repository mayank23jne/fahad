import{D as U}from"./KTDataTable.c04eda30.js";import{u as x}from"./survey.6b7b571f.js";import{h as F}from"./dom.d7d6c49b.js";import{S as k}from"./sweetalert2.all.fbc178e9.js";import{d as M,r as p,u as E,G as B,_ as L,k as u,l as t,I as r,m as d,y as c,ae as H,p as g,n as i,F as N,J as W,x as D,H as b,B as V,o as j,V as q,ax as O}from"./index.40c6202a.js";const G=M({name:"add-inspectionproperty-modal",components:{},props:["inspectionproperty","industry_type"],setup(e,{emit:o}){const f=p(null),I=p(null),T=localStorage.getItem("lang"),$=p(!1);p(!1);const v=localStorage.getItem("logged_user_id"),{t:m,te:_}=E(),s=S=>_(S)?m(S):S,n=p({propertyname_en:"",propertyname_ar:"",owner:"",industrytype:""}),A=p({propertyname_ar:[{required:!0,message:s("name_ar_req"),trigger:"change"}],owner:[{required:!0,message:s("ownerreq"),trigger:"change"}],industrytype:[{required:!0,message:s("industryreq"),trigger:"change"}]});return{newItem:n,rules:A,submit:()=>{!f.value||(e.inspectionproperty,f.value.validate(S=>{S&&($.value=!0,B.post("createInspectionProperty",{name_en:n.value.propertyname_en,name_ar:n.value.propertyname_ar,owner:n.value.owner,industry_type:n.value.industrytype,user_id:v}).then(({data:y})=>{e.inspectionproperty.push({created_at:y.created_at,id:y.id,industry_type:y.industry_type,is_deleted:"0",owner:y.owner,propertyname_ar:y.propertyname_ar,propertyname_en:y.propertyname_en,status:"1",updated_at:y.updated_at,user_id:y.user_id}),setTimeout(()=>{var P;$.value=!1,(P=f.value)==null||P.resetFields(),k.fire({text:s("savesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:s("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{F(I.value),n.value={propertyname_ar:"",propertyname_en:"",owner:"",industrytype:""}})},2e3)}).catch(({response:y})=>{}))}))},formRef:f,loading:$,addInspectionPropertyModalRef:I,translate:s,lang:T}}}),J={class:"modal fade",id:"kt_modal_add_inspectionproperty",ref:"addInspectionPropertyModalRef",tabindex:"-1","aria-hidden":"true"},z={class:"modal-dialog modal-dialog-centered mw-650px"},K={class:"modal-content"},Q={class:"modal-header",id:"kt_modal_add_customer_header"},X={class:"fw-bold"},Y={id:"kt_modal_add_inspectionproperty_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Z={class:"svg-icon svg-icon-1"},ee={class:"modal-body py-10 px-lg-17"},te={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_industryproperty_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_inspectionproperty_header","data-kt-scroll-wrappers":"#kt_modal_add_inspectionproperty_scroll","data-kt-scroll-offset":"300px"},ne={class:"fv-row mb-7"},se={class:"required fs-6 fw-semobold mb-2"},oe={class:"fv-row mb-7"},ae={class:"fs-6 fw-semobold mb-2"},re={class:"d-flex flex-column mb-7 fv-row"},le={class:"fs-6 fw-semobold mb-2"},ie={class:"required"},de={class:"d-flex flex-column mb-7 fv-row"},ce={class:"fs-6 fw-semobold mb-2"},ue={class:"required"},pe={class:"modal-footer flex-center"},me={type:"reset",id:"kt_modal_add_inspectionproperty_cancel",class:"btn btn-light me-3"},_e=["data-kt-indicator"],ye={key:0,class:"indicator-label"},fe={class:"svg-icon svg-icon-3 ms-2 me-0"},he={key:1,class:"indicator-progress"},ge=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function be(e,o,f,I,T,$){const v=g("inline-svg"),m=g("el-input"),_=g("el-form-item"),s=g("el-option"),n=g("el-select"),A=g("el-form");return i(),u("div",J,[t("div",z,[t("div",K,[t("div",Q,[t("h2",X,r(e.translate("addinspectionpropertytype")),1),t("div",Y,[t("span",Z,[d(v,{src:"/media/icons/duotune/arrows/arr061.svg"})])])]),d(A,{onSubmit:o[4]||(o[4]=H(l=>e.submit(),["prevent"])),model:e.newItem,rules:e.rules,ref:"formRef"},{default:c(()=>[t("div",ee,[t("div",te,[t("div",ne,[t("label",se,r(e.translate("name"))+"("+r(e.translate("arabic"))+")",1),d(_,{prop:"propertyname_ar"},{default:c(()=>[d(m,{modelValue:e.newItem.propertyname_ar,"onUpdate:modelValue":o[0]||(o[0]=l=>e.newItem.propertyname_ar=l),type:"text",name:"propertyname_ar",placeholder:""},null,8,["modelValue"])]),_:1})]),t("div",oe,[t("label",ae,r(e.translate("name"))+"("+r(e.translate("english"))+")",1),d(_,{prop:"propertyname_en"},{default:c(()=>[d(m,{modelValue:e.newItem.propertyname_en,"onUpdate:modelValue":o[1]||(o[1]=l=>e.newItem.propertyname_en=l),type:"text",name:"propertyname_en",placeholder:""},null,8,["modelValue"])]),_:1})]),t("div",re,[t("label",le,[t("span",ie,r(e.translate("selectowner")),1)]),d(_,{prop:"owner"},{default:c(()=>[d(m,{modelValue:e.newItem.owner,"onUpdate:modelValue":o[2]||(o[2]=l=>e.newItem.owner=l),type:"text",name:"owner",placeholder:""},null,8,["modelValue"])]),_:1})]),t("div",de,[t("label",ce,[t("span",ue,r(e.translate("selectindustrytype")),1)]),d(_,{prop:"industrytype"},{default:c(()=>[d(n,{modelValue:e.newItem.industrytype,"onUpdate:modelValue":o[3]||(o[3]=l=>e.newItem.industrytype=l),options:e.industry_type,"popper-append-to-body":!1,teleported:!1},{default:c(()=>[(i(!0),u(N,null,W(e.industry_type,l=>(i(),u(N,{key:l.id},[e.lang=="en"||e.lang=="enrtl"?(i(),D(s,{key:0,value:l.id,label:l.name_en},{default:c(()=>[b(r(l.name_en),1)]),_:2},1032,["value","label"])):(i(),D(s,{key:1,value:l.id,label:l.name_ar},{default:c(()=>[b(r(l.name_ar),1)]),_:2},1032,["value","label"]))],64))),128))]),_:1},8,["modelValue","options"])]),_:1})])])]),t("div",pe,[t("button",me,r(e.translate("cancel")),1),t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?V("",!0):(i(),u("span",ye,[b(r(e.translate("save"))+" ",1),t("span",fe,[d(v,{src:"/media/icons/duotune/arrows/arr064.svg"})])])),e.loading?(i(),u("span",he,[b(r(e.translate("pleasewait"))+" ",1),ge])):V("",!0)],8,_e)])]),_:1},8,["model","rules"])])])],512)}const ve=L(G,[["render",be]]),we=M({name:"inspectionpropertytype",components:{Datatable:U,InspectionPropertyAddNewModal:ve},setup(){const e=p([{columnName:"name",columnLabel:"name",sortEnabled:!0,columnWidth:175},{columnName:"owner",columnLabel:"owner",sortEnabled:!0,columnWidth:175},{columnName:"industrytype",columnLabel:"industrytype",sortEnabled:!0,columnWidth:175},{columnName:"status",columnLabel:"status",sortEnabled:!0,columnWidth:50},{columnName:"action",columnLabel:"action",sortEnabled:!0,columnWidth:157}]),o=p([]),f=p([]);p(!0);const I=p([]),T=localStorage.getItem("lang"),$=p([]),v=p("");x();const m=localStorage.getItem("logged_user_id"),{t:_,te:s}=E(),n=a=>s(a)?_(a):a;return j(()=>{B.post("showInspectionProperty",{user_id:m}).then(({data:a})=>{o.value=a}).catch(({response:a})=>{}),B.post("showIndustryType",{user_id:m}).then(({data:a})=>{f.value=a}).catch(({response:a})=>{})}),{lang:T,selectedItems:$,industry_type:f,inspectionproperty:o,selectedIds:I,onItemSelect:a=>{I.value=a},tableHeader:e,translate:n,deleterow:a=>{k.fire({title:n("areyousure"),text:n("notretrivedata"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:n("yesdelete"),cancelButtonText:n("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(w=>{w.value==!0?B.delete("deleteInspectionProperty/"+a).then(({data:h})=>{o.value=o.value.filter(C=>C.id!==a),setTimeout(()=>{k.fire({text:n("deletesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}):setTimeout(()=>{k.fire({text:n("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},editrow:a=>{q.push({name:"editinspectionproperty",params:{id:a}})},edit_id:v,statuschange:(a,w)=>{let h="0";a=="0"?h="1":h="0",B.post("statusInspectionProperty",{status:h,id:w}).then(({data:C})=>{setTimeout(()=>{k.fire({text:n("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{q.go(0)})},2e3)})},archivechange:(a,w)=>{k.fire({title:n("areyousure"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:n("yesarchive"),cancelButtonText:n("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(h=>{if(h.value==!0){let C="0";a=="0"?C="1":C="0",B.post("isDeletedInspectionProperty",{delete:C,id:w}).then(({data:je})=>{o.value=o.value.filter(R=>R.id!==w),setTimeout(()=>{k.fire({text:n("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}else setTimeout(()=>{k.fire({text:n("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},showData:a=>{let w=a.target.value;return B.post("archiveInspectionProperty",{val:w,user_id:m}).then(({data:h})=>{o.value=h}).catch(({response:h})=>{})}}}}),ke={class:"card"},Ie={class:"card-header border-0 pt-6"},$e=t("div",{class:"card-title"},null,-1),Be={class:"card-toolbar"},Se={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Ce={class:"d-flex flex-wrap my-1"},Te={class:"m-0"},Ve={class:"symbol symbol-20px me-4",value:"0",selected:""},Ae={value:"1"},Ne={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_inspectionproperty"},Pe={class:"svg-icon svg-icon-2"},De=t("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[t("div",{class:"fw-bold me-5"},[t("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),b("Selected ")]),t("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Delete Selected ")],-1),qe={class:"card-body pt-0"},Me={key:0},Ee={key:1},Le=["onClick"],We=["onClick"],Re=["onClick"],Ue=["onClick"],xe=["onClick"];function Fe(e,o,f,I,T,$){const v=g("inline-svg"),m=g("Datatable"),_=g("InspectionPropertyAddNewModal");return i(),u(N,null,[t("div",ke,[t("div",Ie,[$e,t("div",Be,[e.selectedIds.length===0?(i(),u("div",Se,[t("div",Ce,[t("div",Te,[t("select",{name:"status","data-control":"select2","data-hide-search":"true",class:"form-select form-select-white form-select-sm fw-bold w-150px h-30px w-md-150px h-md-40px mr-2",onChange:o[0]||(o[0]=s=>e.showData(s)),style:{"margin-right":"20px","margin-left":"20px"}},[t("option",Ve,r(e.translate("active")),1),t("option",Ae,r(e.translate("archive")),1)],32)])]),t("button",Ne,[t("span",Pe,[d(v,{src:"/media/icons/duotune/arrows/arr075.svg"})]),b(" "+r(e.translate("addnew")),1)])])):V("",!0),De])]),t("div",qe,[d(m,{onOnItemsSelect:e.onItemSelect,data:e.inspectionproperty,header:e.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id"},O({owner:c(({row:s})=>[b(r(s.owner),1)]),industrytype:c(({row:s})=>[(i(!0),u(N,null,W(e.industry_type,n=>(i(),u("span",{key:n.id},[n.id==s.industry_type&&e.lang=="en"||e.lang=="enrtl"?(i(),u("span",Me,r(n.name_en),1)):V("",!0),n.id==s.industry_type&&e.lang=="ar"?(i(),u("span",Ee,r(n.name_ar),1)):V("",!0)]))),128))]),status:c(({row:s})=>[s.status==1?(i(),u("i",{key:0,class:"fa fa-unlock text-success fs-3","aria-hidden":"true",onClick:n=>e.statuschange(s.status,s.id)},null,8,Le)):(i(),u("i",{key:1,class:"fa fa-lock text-danger fs-3","aria-hidden":"true",onClick:n=>e.statuschange(s.status,s.id)},null,8,We))]),action:c(({row:s})=>[t("i",{class:"fa fa-archive text-warning fs-3 m-2","aria-hidden":"true",onClick:n=>e.archivechange(s.is_deleted,s.id)},null,8,Re),t("i",{class:"fa fa-pencil text-primary fs-3 m-2","aria-hidden":"true",onClick:n=>e.editrow(s.id)},null,8,Ue),t("i",{class:"fa fa-trash text-danger fs-3 m-2","aria-hidden":"true",onClick:n=>e.deleterow(s.id)},null,8,xe)]),_:2},[e.lang=="en"||e.lang=="enrtl"?{name:"name",fn:c(({row:s})=>[b(r(s.propertyname_en),1)]),key:"0"}:{name:"name",fn:c(({row:s})=>[b(r(s.propertyname_ar),1)]),key:"1"}]),1032,["onOnItemsSelect","data","header"])])]),d(_,{inspectionproperty:e.inspectionproperty,industry_type:e.industry_type},null,8,["inspectionproperty","industry_type"])],64)}const Qe=L(we,[["render",Fe]]);export{Qe as default};
