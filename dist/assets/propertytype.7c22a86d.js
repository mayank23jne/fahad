import{D as E}from"./KTDataTable.c04eda30.js";import{u as R}from"./survey.6b7b571f.js";import"./IndustryTypeAddNewModel.vue_vue_type_script_lang.83d26525.js";import{h as q}from"./dom.d7d6c49b.js";import{S as f}from"./sweetalert2.all.fbc178e9.js";import{d as P,r as l,u as V,G as T,_ as D,k as y,l as s,I as n,m as d,y as g,ae as F,p as b,n as v,H as B,B as x,o as H,V as A,ax as L,F as W}from"./index.40c6202a.js";const j=P({name:"add-propertytype-modal",components:{},props:["propertytype"],setup(t,{emit:o}){const c=l(null),k=l(null),h=l(!1);l(!1);const{t:S,te:m}=V(),u=localStorage.getItem("logged_user_id"),i=w=>m(w)?S(w):w,e=l({name_en:"",name_ar:""}),r=l({name_ar:[{required:!0,message:i("name_ar_req"),trigger:"change"}]});return{newItem:e,rules:r,submit:()=>{!c.value||(t.propertytype,c.value.validate(w=>{w&&(h.value=!0,T.post("createPropertyType",{name_en:e.value.name_en,name_ar:e.value.name_ar,user_id:u}).then(({data:C})=>{t.propertytype.push({id:C.id,name_ar:e.value.name_ar,name_en:e.value.name_en,user_id:u,is_deleted:"0",status:"1"}),setTimeout(()=>{var I;h.value=!1,(I=c.value)==null||I.resetFields(),e.value={name_ar:"",name_en:""},f.fire({text:i("savesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:i("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{q(k.value)})},2e3)}).catch(({response:C})=>{}))}))},formRef:c,loading:h,addPropertyTypeModalRef:k,translate:i}}}),O={class:"modal fade",id:"kt_modal_add_propertytype",ref:"addPropertyTypeModalRef",tabindex:"-1","aria-hidden":"true"},U={class:"modal-dialog modal-dialog-centered mw-650px"},G={class:"modal-content"},z={class:"modal-header",id:"kt_modal_add_customer_header"},J={class:"fw-bold"},K={id:"kt_modal_add_propertytype_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Q={class:"svg-icon svg-icon-1"},X={class:"modal-body py-10 px-lg-17"},Y={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_propertytype_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_propertytype_header","data-kt-scroll-wrappers":"#kt_modal_add_propertytype_scroll","data-kt-scroll-offset":"300px"},Z={class:"fv-row mb-7"},ee={class:"required fs-6 fw-semobold mb-2"},te={class:"fv-row mb-7"},se={class:"fs-6 fw-semobold mb-2"},ae={class:"modal-footer flex-center"},oe={type:"reset",id:"kt_modal_add_propertytype_cancel",class:"btn btn-light me-3"},ne=["data-kt-indicator"],re={key:0,class:"indicator-label"},le={class:"svg-icon svg-icon-3 ms-2 me-0"},ie={key:1,class:"indicator-progress"},de=s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function ce(t,o,c,k,h,S){const m=b("inline-svg"),u=b("el-input"),i=b("el-form-item"),e=b("el-form");return v(),y("div",O,[s("div",U,[s("div",G,[s("div",z,[s("h2",J,n(t.translate("addpropertytype")),1),s("div",K,[s("span",Q,[d(m,{src:"/media/icons/duotune/arrows/arr061.svg"})])])]),d(e,{onSubmit:o[2]||(o[2]=F(r=>t.submit(),["prevent"])),model:t.newItem,rules:t.rules,ref:"formRef"},{default:g(()=>[s("div",X,[s("div",Y,[s("div",Z,[s("label",ee,n(t.translate("name"))+"("+n(t.translate("arabic"))+")",1),d(i,{prop:"name_ar"},{default:g(()=>[d(u,{modelValue:t.newItem.name_ar,"onUpdate:modelValue":o[0]||(o[0]=r=>t.newItem.name_ar=r),type:"text",name:"name_ar",placeholder:""},null,8,["modelValue"])]),_:1})]),s("div",te,[s("label",se,n(t.translate("name"))+"("+n(t.translate("english"))+")",1),d(i,{prop:"name_en"},{default:g(()=>[d(u,{modelValue:t.newItem.name_en,"onUpdate:modelValue":o[1]||(o[1]=r=>t.newItem.name_en=r),type:"text",name:"name_en",placeholder:""},null,8,["modelValue"])]),_:1})])])]),s("div",ae,[s("button",oe,n(t.translate("cancel")),1),s("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?x("",!0):(v(),y("span",re,[B(n(t.translate("save"))+" ",1),s("span",le,[d(m,{src:"/media/icons/duotune/arrows/arr064.svg"})])])),t.loading?(v(),y("span",ie,[B(n(t.translate("pleasewait"))+" ",1),de])):x("",!0)],8,ne)])]),_:1},8,["model","rules"])])])],512)}const me=D(j,[["render",ce]]),ue=P({name:"propertytype",components:{Datatable:E,PropertyTypeAddNewModal:me},setup(){const t=l([{columnName:"name",columnLabel:"name",sortEnabled:!0,columnWidth:150},{columnName:"status",columnLabel:"status",sortEnabled:!0,columnWidth:50},{columnName:"action",columnLabel:"action",sortEnabled:!0,columnWidth:157}]),o=l([]);l(!0);const c=l([]),k=localStorage.getItem("lang"),h=l([]),S=l("");R();const m=localStorage.getItem("logged_user_id"),{t:u,te:i}=V(),e=a=>i(a)?u(a):a;return H(()=>T.post("showPropertyType",{user_id:m}).then(({data:a})=>{o.value=a}).catch(({response:a})=>{})),{lang:k,selectedItems:h,propertytype:o,selectedIds:c,onItemSelect:a=>{c.value=a},tableHeader:t,translate:e,deleterow:a=>{f.fire({title:e("areyousure"),text:e("notretrivedata"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:e("yesdelete"),cancelButtonText:e("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(_=>{_.value==!0?T.delete("deletePropertyType/"+a).then(({data:p})=>{o.value=o.value.filter($=>$.id!==a),setTimeout(()=>{f.fire({text:e("deletesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}):setTimeout(()=>{f.fire({text:e("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},editrow:a=>{A.push({name:"editpropertytype",params:{id:a}})},edit_id:S,statuschange:(a,_)=>{let p="0";a=="0"?p="1":p="0",T.post("statusPropertyType",{status:p,id:_}).then(({data:$})=>{setTimeout(()=>{f.fire({text:e("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{A.go(0)})},2e3)})},archivechange:(a,_)=>{f.fire({title:e("areyousure"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:e("yesarchive"),cancelButtonText:e("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(p=>{if(p.value==!0){let $="0";a=="0"?$="1":$="0",T.post("isDeletedPropertyType",{delete:$,id:_}).then(({data:De})=>{o.value=o.value.filter(M=>M.id!==_),setTimeout(()=>{f.fire({text:e("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}else setTimeout(()=>{f.fire({text:e("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},showData:a=>{let _=a.target.value;return T.post("archivePropertyTypes",{val:_,user_id:m}).then(({data:p})=>{o.value=p}).catch(({response:p})=>{})}}}}),pe={class:"card"},_e={class:"card-header border-0 pt-6"},fe=s("div",{class:"card-title"},null,-1),he={class:"card-toolbar"},ye={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},ge={class:"d-flex flex-wrap my-1"},be={class:"m-0"},ve={class:"symbol symbol-20px me-4",value:"0",selected:""},ke={value:"1"},we={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_propertytype"},$e={class:"svg-icon svg-icon-2"},Te=s("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[s("div",{class:"fw-bold me-5"},[s("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),B("Selected ")]),s("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Delete Selected ")],-1),Be={class:"card-body pt-0"},Se=["onClick"],Ce=["onClick"],Ie=["onClick"],xe=["onClick"],Ae=["onClick"];function Pe(t,o,c,k,h,S){const m=b("inline-svg"),u=b("Datatable"),i=b("PropertyTypeAddNewModal");return v(),y(W,null,[s("div",pe,[s("div",_e,[fe,s("div",he,[t.selectedIds.length===0?(v(),y("div",ye,[s("div",ge,[s("div",be,[s("select",{name:"status","data-control":"select2","data-hide-search":"true",class:"form-select form-select-white form-select-sm fw-bold w-150px h-30px w-md-150px h-md-40px mr-2",onChange:o[0]||(o[0]=e=>t.showData(e)),style:{"margin-right":"20px","margin-left":"20px"}},[s("option",ve,n(t.translate("active")),1),s("option",ke,n(t.translate("archive")),1)],32)])]),s("button",we,[s("span",$e,[d(m,{src:"/media/icons/duotune/arrows/arr075.svg"})]),B(" "+n(t.translate("addnew")),1)])])):x("",!0),Te])]),s("div",Be,[d(u,{onOnItemsSelect:t.onItemSelect,data:t.propertytype,header:t.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id"},L({status:g(({row:e})=>[e.status==1?(v(),y("i",{key:0,class:"fa fa-unlock text-success fs-3","aria-hidden":"true",onClick:r=>t.statuschange(e.status,e.id)},null,8,Se)):(v(),y("i",{key:1,class:"fa fa-lock text-danger fs-3","aria-hidden":"true",onClick:r=>t.statuschange(e.status,e.id)},null,8,Ce))]),action:g(({row:e})=>[s("i",{class:"fa fa-archive text-warning fs-3 m-2","aria-hidden":"true",onClick:r=>t.archivechange(e.is_deleted,e.id)},null,8,Ie),s("i",{class:"fa fa-pencil text-primary fs-3 m-2","aria-hidden":"true",onClick:r=>t.editrow(e.id)},null,8,xe),s("i",{class:"fa fa-trash text-danger fs-3 m-2","aria-hidden":"true",onClick:r=>t.deleterow(e.id)},null,8,Ae)]),_:2},[t.lang=="en"||t.lang=="enrtl"?{name:"name",fn:g(({row:e})=>[B(n(e.name_en),1)]),key:"0"}:{name:"name",fn:g(({row:e})=>[B(n(e.name_ar),1)]),key:"1"}]),1032,["onOnItemsSelect","data","header"])])]),d(i,{propertytype:t.propertytype},null,8,["propertytype"])],64)}const He=D(ue,[["render",Pe]]);export{He as default};
