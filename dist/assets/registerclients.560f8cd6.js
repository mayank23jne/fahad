import{d as C,ac as T,ab as N,aA as $,u as D,r as f,o as E,G as g,V as M,_ as J,k as u,l as e,m as t,y as h,p as y,n as p,I as a,F as V,J as k,B as I,H as O}from"./index.40c6202a.js";import{S as B}from"./sweetalert2.all.fbc178e9.js";import{c as j,a as _}from"./object.fb242430.js";const G=C({name:"register",components:{ErrorMessage:T,Field:N,VForm:$},setup(o){const{t:l,te:q}=D(),m=f(null),S=f([]),i=f({firstname:"",lastname:"",email:"",password:"",mobile:"",role_id:"",nationality:"",company:"",category_id:""}),r=f({id:0,company_name:""}),d=f({id:0,category:""}),b=f({id:0,role_name:""}),s=c=>q(c)?l(c):c,F=j().shape({firstname:_().required(s("firstnamereq")),lastname:_().required(s("lastnamereq")),nationality:_().required(s("nationalityreq")),mobile:_().required(s("mobilereq")),password:_().required(s("passreq")).min(6,s("passless")),role_name:_().required(s("rolereq")),category:_().required(s("catreq"))});E(()=>{g.get("showRoles").then(({data:c})=>{b.value=c}),g.get("showCompanies").then(({data:c})=>{r.value=c.data}),g.get("category").then(({data:c})=>{d.value=c})});const U=(c,{resetForm:w})=>{m.value&&(m.value.setAttribute("data-kt-indicator","on"),w(),setTimeout(()=>{var n;(n=m.value)==null||n.removeAttribute("data-kt-indicator")},2e3))},A=(c,{resetForm:w})=>{if(m.value){m.value.setAttribute("data-kt-indicator","on");const n=new FormData;n.append("firstname",i.value.firstname),n.append("lastname",i.value.lastname),n.append("email",i.value.email!==""?i.value.email:""),n.append("password",i.value.password),n.append("mobile",i.value.mobile),n.append("role_id",i.value.role_id),n.append("nationality",i.value.nationality),n.append("is_active","1"),n.append("company",i.value.company),n.append("category_id",i.value.category_id),g.post("admin/create",n).then(({data:v})=>{setTimeout(()=>{B.fire({text:s("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:s("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{w(),M.push({name:"usersupdate"})})},2e3)}).catch(({response:v})=>{JSON.stringify(v.data),setTimeout(()=>{B.fire({text:JSON.stringify(v.data),icon:"error",buttonsStyling:!1,confirmButtonText:s("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}),setTimeout(()=>{var v;(v=m.value)==null||v.removeAttribute("data-kt-indicator")},2e3)}};return f(""),{submitButton1:m,saveChanges1:U,newclient:i,compainies:r,categories:d,roles:b,units:S,formSubmit:A,profileDetailsValidator:F,translate:s}}});const H={class:"card mb-5 mb-xl-10"},L={id:"kt_account_profile_details",class:"collapse show"},R={class:"card-body border-top p-9"},z={class:"row mb-6"},K={class:"col-lg-4 col-form-label required fw-semobold fs-6"},P={class:"col-lg-8"},Q={class:"fv-plugins-message-container"},W={class:"fv-help-block"},X={class:"row mb-6"},Y={class:"col-lg-4 col-form-label required fw-semobold fs-6"},Z={class:"col-lg-8 fv-row"},x={class:"fv-plugins-message-container"},ee={class:"fv-help-block"},oe={class:"row mb-6"},se={class:"col-lg-4 col-form-label fw-semobold fs-6"},le={class:"required"},te={class:"col-lg-8 fv-row"},ae={class:"fv-plugins-message-container"},ne={class:"fv-help-block"},ie={class:"row mb-6"},re={class:"col-lg-4 col-form-label fw-semobold fs-6"},de={class:"col-lg-8 fv-row"},ce={class:"fv-plugins-message-container"},me={class:"fv-help-block"},ue={class:"row mb-6"},pe={class:"col-lg-4 col-form-label required fw-semobold fs-6"},fe={class:"col-lg-8 fv-row"},_e={class:"fv-plugins-message-container"},ve={class:"fv-help-block"},be={class:"row mb-6"},ge={class:"col-lg-4 col-form-label required fw-semobold fs-6"},he={class:"col-lg-8 fv-row"},we={class:"fv-plugins-message-container"},ye={class:"fv-help-block"},Ve={class:"row mb-6"},ke={class:"col-lg-4 col-form-label fw-semobold fs-6"},qe={class:"required"},Se={class:"col-lg-8 fv-row"},Be=["value"],Fe={class:"fv-plugins-message-container"},Ue={class:"fv-help-block"},Ae={class:"row mb-6"},Ce={class:"col-lg-4 col-form-label required fw-semobold fs-6"},Te={class:"col-lg-8 fv-row"},Ne=["value"],$e={class:"fv-plugins-message-container"},De={class:"fv-help-block"},Ee={key:0,class:"row mb-6"},Me={class:"col-lg-4 col-form-label required fw-semobold fs-6"},Je={class:"col-lg-8 fv-row"},Ie=["value"],Oe={class:"fv-plugins-message-container"},je={class:"fv-help-block"},Ge={class:"card-footer d-flex justify-content-end py-6 px-9"},He={type:"reset",class:"btn btn-light btn-active-light-primary me-2"},Le={type:"submit",id:"kt_account_profile_details_submit",ref:"submitButton1",class:"btn btn-primary"},Re={class:"indicator-label"},ze={class:"indicator-progress"},Ke=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Pe(o,l,q,m,S,i){const r=y("Field"),d=y("ErrorMessage"),b=y("VForm");return p(),u("div",H,[e("div",L,[t(b,{id:"kt_account_profile_details_form",class:"form",novalidate:"",onSubmit:o.formSubmit,"validation-schema":o.profileDetailsValidator},{default:h(()=>[e("div",R,[e("div",z,[e("label",K,a(o.translate("firstname")),1),e("div",P,[t(r,{type:"text",name:"firstname",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:o.translate("firstname"),modelValue:o.newclient.firstname,"onUpdate:modelValue":l[0]||(l[0]=s=>o.newclient.firstname=s)},null,8,["placeholder","modelValue"]),e("div",Q,[e("div",W,[t(d,{name:"firstname"})])])])]),e("div",X,[e("label",Y,a(o.translate("lastname")),1),e("div",Z,[t(r,{type:"text",name:"lastname",class:"form-control form-control-lg required form-control-solid",placeholder:o.translate("lastname"),modelValue:o.newclient.lastname,"onUpdate:modelValue":l[1]||(l[1]=s=>o.newclient.lastname=s)},null,8,["placeholder","modelValue"]),e("div",x,[e("div",ee,[t(d,{name:"lastname"})])])])]),e("div",oe,[e("label",se,[e("span",le,a(o.translate("nationality")),1)]),e("div",te,[t(r,{type:"text",name:"nationality",class:"form-control form-control-lg required form-control-solid",placeholder:o.translate("nationality"),modelValue:o.newclient.nationality,"onUpdate:modelValue":l[2]||(l[2]=s=>o.newclient.nationality=s)},null,8,["placeholder","modelValue"]),e("div",ae,[e("div",ne,[t(d,{name:"nationality"})])])])]),e("div",ie,[e("label",re,a(o.translate("e_mail")),1),e("div",de,[t(r,{type:"email",name:"email",class:"form-control form-control-lg form-control-solid",placeholder:o.translate("e_mail"),modelValue:o.newclient.email,"onUpdate:modelValue":l[3]||(l[3]=s=>o.newclient.email=s)},null,8,["placeholder","modelValue"]),e("div",ce,[e("div",me,[t(d,{name:"email"})])])])]),e("div",ue,[e("label",pe,a(o.translate("phone")),1),e("div",fe,[t(r,{type:"text",name:"mobile",class:"form-control form-control-lg required form-control-solid",placeholder:o.translate("phone"),modelValue:o.newclient.mobile,"onUpdate:modelValue":l[4]||(l[4]=s=>o.newclient.mobile=s)},null,8,["placeholder","modelValue"]),e("div",_e,[e("div",ve,[t(d,{name:"mobile"})])])])]),e("div",be,[e("label",ge,a(o.translate("password")),1),e("div",he,[t(r,{type:"password",name:"password",class:"form-control form-control-lg form-control-solid",placeholder:o.translate("password"),modelValue:o.newclient.password,"onUpdate:modelValue":l[5]||(l[5]=s=>o.newclient.password=s)},null,8,["placeholder","modelValue"]),e("div",we,[e("div",ye,[t(d,{name:"password"})])])])]),e("div",Ve,[e("label",ke,[e("span",qe,a(o.translate("selectdegree")),1)]),e("div",Se,[t(r,{as:"select",name:"role_name",class:"form-select form-select-solid form-select-lg fw-semobold",modelValue:o.newclient.role_id,"onUpdate:modelValue":l[6]||(l[6]=s=>o.newclient.role_id=s),options:o.roles},{default:h(()=>[(p(!0),u(V,null,k(o.roles,s=>(p(),u("option",{key:s.id,value:s.id},a(s.role_name),9,Be))),128))]),_:1},8,["modelValue","options"]),e("div",Fe,[e("div",Ue,[t(d,{name:"role_name"})])])])]),e("div",Ae,[e("label",Ce,a(o.translate("choosecategory")),1),e("div",Te,[t(r,{as:"select",name:"category",class:"form-select form-select-solid form-select-lg",modelValue:o.newclient.category_id,"onUpdate:modelValue":l[7]||(l[7]=s=>o.newclient.category_id=s),options:o.categories},{default:h(()=>[(p(!0),u(V,null,k(o.categories,s=>(p(),u("option",{key:s.id,value:s.id},a(s.category),9,Ne))),128))]),_:1},8,["modelValue","options"]),e("div",$e,[e("div",De,[t(d,{name:"category"})])])])]),o.newclient.role_id=="14"||o.newclient.role_id=="15"?(p(),u("div",Ee,[e("label",Me,a(o.translate("selectcontractor")),1),e("div",Je,[t(r,{as:"select",name:"type",class:"form-select form-select-solid form-select-lg",modelValue:o.newclient.company,"onUpdate:modelValue":l[8]||(l[8]=s=>o.newclient.company=s),options:o.compainies},{default:h(()=>[(p(!0),u(V,null,k(o.compainies,s=>(p(),u("option",{key:s.id,value:s.id},a(s.company_name),9,Ie))),128))]),_:1},8,["modelValue","options"]),e("div",Oe,[e("div",je,[t(d,{name:"type"})])])])])):I("",!0)]),e("div",Ge,[e("button",He,a(o.translate("discard")),1),e("button",Le,[e("span",Re,a(o.translate("registration")),1),e("span",ze,[O(a(o.translate("pleasewait"))+" ",1),Ke])],512)])]),_:1},8,["onSubmit","validation-schema"])])])}const Ye=J(G,[["render",Pe]]);export{Ye as default};
