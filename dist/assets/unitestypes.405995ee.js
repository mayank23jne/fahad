import{D as L}from"./KTDataTable.c04eda30.js";import{h as V}from"./dom.d7d6c49b.js";import{S as k}from"./sweetalert2.all.fbc178e9.js";import{d as A,u as M,r,G as U,_ as N,k as h,l as e,I as l,m as c,y as v,ae as E,p as f,n as b,H as $,B as D,o as R,V as I,ax as W,F as j}from"./index.40c6202a.js";const F=A({name:"add-unittype-modal",components:{},props:["items"],setup(t){const{t:a,te:B}=M(),y=r(null),p=r(null),d=r(!1);r(!1);const i=r({unit_type_ar:"",unit_type_en:""}),o=_=>B(_)?a(_):_,n=r({unit_type_ar:[{required:!0,message:o("requnittype"),trigger:"change"}]});return{cancelunit:()=>{i.value.unit_type_ar="",i.value.unit_type_en="",V(p.value)},saveunit:()=>{!y.value||y.value.validate(_=>{_&&(d.value=!0,U.post("addUnitType",{type:i.value.unit_type_ar,type_en:i.value.unit_type_en}).then(({data:m})=>{t.items.push({type:m.type,type_en:m.type_en,id:m.id,status:"1"}),setTimeout(()=>{var T;d.value=!1,i.value={unit_type_ar:"",unit_type_en:""},(T=y.value)==null||T.resetFields(),k.fire({text:o("savesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:o("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{V(p.value)})},2e3)}).catch(({response:m})=>{m.data.errors&&setTimeout(()=>{d.value=!1,k.fire({text:m.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:o("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}))})},rules:n,formRef:y,loading:d,addUnittypeModalRef:p,unit:i,translate:o}}}),H={class:"modal fade",id:"kt_modal_add_unittype",ref:"addUnittypeModalRef",tabindex:"-1","aria-hidden":"true"},G={class:"modal-dialog modal-dialog-centered mw-650px"},z={class:"modal-content"},J={class:"modal-header",id:"kt_modal_add_customer_header"},K={class:"fw-bold"},O={id:"kt_modal_add_unittype_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},P={class:"svg-icon svg-icon-1"},Q={class:"modal-body py-10 px-lg-17"},X={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_unittype_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_unittype_header","data-kt-scroll-wrappers":"#kt_modal_add_unittype_scroll","data-kt-scroll-offset":"300px"},Y={class:"fv-row mb-7"},Z={class:"required fs-6 fw-semobold mb-2"},x={class:"fv-row mb-7"},tt={class:"fs-6 fw-semobold mb-2"},et={class:"modal-footer flex-center"},st=["data-kt-indicator"],nt={key:0,class:"indicator-label"},at={class:"svg-icon svg-icon-3 ms-2 me-0"},ot={key:1,class:"indicator-progress"},lt=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function it(t,a,B,y,p,d){const i=f("inline-svg"),o=f("el-input"),n=f("el-form-item"),g=f("el-form");return b(),h("div",H,[e("div",G,[e("div",z,[e("div",J,[e("h2",K,l(t.translate("addunittype")),1),e("div",O,[e("span",P,[c(i,{src:"/media/icons/duotune/arrows/arr061.svg"})])])]),c(g,{onSubmit:a[3]||(a[3]=E(s=>t.saveunit(),["prevent"])),model:t.unit,rules:t.rules,ref:"formRef"},{default:v(()=>[e("div",Q,[e("div",X,[e("div",Y,[e("label",Z,l(t.translate("typeunit"))+"("+l(t.translate("arabic"))+")",1),c(n,{prop:"unit_type_ar"},{default:v(()=>[c(o,{modelValue:t.unit.unit_type_ar,"onUpdate:modelValue":a[0]||(a[0]=s=>t.unit.unit_type_ar=s),type:"text",name:"unit_type_ar",placeholder:t.translate("placeunittype")},null,8,["modelValue","placeholder"])]),_:1})]),e("div",x,[e("label",tt,l(t.translate("typeunit"))+"("+l(t.translate("english"))+")",1),c(n,{prop:"unit_type"},{default:v(()=>[c(o,{modelValue:t.unit.unit_type_en,"onUpdate:modelValue":a[1]||(a[1]=s=>t.unit.unit_type_en=s),type:"text",name:"unit_type_en",placeholder:t.translate("placeunittype")},null,8,["modelValue","placeholder"])]),_:1})])])]),e("div",et,[e("button",{type:"reset",id:"kt_modal_add_unittype_cancel",class:"btn btn-light me-3",onClick:a[2]||(a[2]=(...s)=>t.cancelunit&&t.cancelunit(...s))},l(t.translate("cancel")),1),e("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?D("",!0):(b(),h("span",nt,[$(l(t.translate("save"))+" ",1),e("span",at,[c(i,{src:"/media/icons/duotune/arrows/arr064.svg"})])])),t.loading?(b(),h("span",ot,[$(l(t.translate("pleasewait"))+" ",1),lt])):D("",!0)],8,st)])]),_:1},8,["model","rules"])])])],512)}const dt=N(F,[["render",it]]),rt=A({name:"edit-unittype-modal",components:{},props:["items","id","editdata","edittype"],emit:["update"],setup(t,{emit:a}){r([t.items]);const{t:B,te:y}=M(),p=r(null),d=r(null),i=r(!1);r(!1);const o=r({unit_type_ar:"",unit_type_en:"",status:""}),n=m=>y(m)?B(m):m,g=r({unit_type_ar:[{required:!0,message:n("requnittype"),trigger:"change"}]});return R(async()=>{t.id&&(console.log("edit",o.value),t.editdata&&(console.log(t.editdata),o.value=await t.editdata),console.log("unit.value",o.value))}),{cancelunit:()=>{o.value.unit_type_ar="",o.value.unit_type_en="",V(d.value)},saveunit:()=>{!p.value||p.value.validate(m=>{m&&(i.value=!0,U.post("updateUnitType",{unit_type_ar:o.value.unit_type_ar,unit_type_en:o.value.unit_type_en,id:t.id}).then(({data:T})=>{t.items.push({type:T.type,type_en:T.type_en,status:"1",id:T.id}),setTimeout(()=>{i.value=!1,k.fire({text:n("savesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{V(d.value)})},2e3)}))})},rules:g,formRef:p,loading:i,editUnittypeModalRef:d,unit:o,translate:n}}}),ut={class:"modal fade",id:"kt_modal_edit_unittype",ref:"editUnittypeModalRef",tabindex:"-1","aria-hidden":"true"},ct={class:"modal-dialog modal-dialog-centered mw-650px"},mt={class:"modal-content"},pt={class:"modal-header",id:"kt_modal_add_customer_header"},_t={class:"fw-bold"},ft={id:"kt_modal_edit_unittype_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},yt={class:"svg-icon svg-icon-1"},ht={class:"modal-body py-10 px-lg-17"},vt={class:"scroll-y me-n7 pe-7",id:"kt_modal_edit_unittype_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_edit_unittype_header","data-kt-scroll-wrappers":"#kt_modal_edit_unittype_scroll","data-kt-scroll-offset":"300px"},bt={class:"fv-row mb-7"},gt={class:"required fs-6 fw-semobold mb-2"},kt={class:"fv-row mb-7"},$t={class:"fs-6 fw-semobold mb-2"},wt={class:"modal-footer flex-center"},Bt=["data-kt-indicator"],Ct={key:0,class:"indicator-label"},Tt={class:"svg-icon svg-icon-3 ms-2 me-0"},Ut={key:1,class:"indicator-progress"},St=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Vt(t,a,B,y,p,d){const i=f("inline-svg"),o=f("el-input"),n=f("el-form-item"),g=f("el-form");return b(),h("div",ut,[e("div",ct,[e("div",mt,[e("div",pt,[e("h2",_t,l(t.translate("editunittype")),1),e("div",ft,[e("span",yt,[c(i,{src:"/media/icons/duotune/arrows/arr061.svg"})])])]),c(g,{onSubmit:a[3]||(a[3]=E(s=>t.saveunit(),["prevent"])),model:t.unit,rules:t.rules,ref:"formRef"},{default:v(()=>[e("div",ht,[e("div",vt,[e("div",bt,[e("label",gt,l(t.translate("typeunit"))+"("+l(t.translate("arabic"))+")",1),c(n,{prop:"unit_type_ar"},{default:v(()=>[c(o,{modelValue:t.unit.unit_type_ar,"onUpdate:modelValue":a[0]||(a[0]=s=>t.unit.unit_type_ar=s),type:"text",name:"unit_type_ar",placeholder:t.translate("placeunittype")},null,8,["modelValue","placeholder"])]),_:1})]),e("div",kt,[e("label",$t,l(t.translate("typeunit"))+"("+l(t.translate("english"))+")",1),c(n,{prop:"unit_type"},{default:v(()=>[c(o,{modelValue:t.unit.unit_type_en,"onUpdate:modelValue":a[1]||(a[1]=s=>t.unit.unit_type_en=s),type:"text",name:"unit_type_en",placeholder:t.translate("placeunittype")},null,8,["modelValue","placeholder"])]),_:1})])])]),e("div",wt,[e("button",{type:"reset",id:"kt_modal_edit_unittype_cancel",class:"btn btn-light me-3",onClick:a[2]||(a[2]=(...s)=>t.cancelunit&&t.cancelunit(...s))},l(t.translate("cancel")),1),e("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?D("",!0):(b(),h("span",Ct,[$(l(t.translate("save"))+" ",1),e("span",Tt,[c(i,{src:"/media/icons/duotune/arrows/arr064.svg"})])])),t.loading?(b(),h("span",Ut,[$(l(t.translate("pleasewait"))+" ",1),St])):D("",!0)],8,Bt)])]),_:1},8,["model","rules"])])])],512)}const Dt=N(rt,[["render",Vt]]),At=A({name:"unitestypes",components:{Datatable:L,UnittypeAddNewModal:dt,EditUnittypeModal:Dt},setup(){const{t,te:a}=M(),B=r([{columnName:"serialno",columnLabel:"id",sortEnabled:!0,columnWidth:175},{columnName:"typeunit",columnLabel:"type",sortEnabled:!0,columnWidth:200},{columnName:"status",columnLabel:"status",sortEnabled:!0,columnWidth:50},{columnName:"action",columnLabel:"action",sortEnabled:!0,columnWidth:157}]),y=r([]),p=r({}),d=r([]),i=r(""),o=r(""),n=u=>a(u)?t(u):u,g=localStorage.getItem("lang");return R(()=>{U.get("showUnitTypes").then(({data:u})=>{d.value=u})}),{tableData:d,tableHeader:B,selectedIds:y,translate:n,deleterow:u=>{k.fire({title:n("areyousure"),text:n("notretrivedata"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:n("yesdelete"),cancelButtonText:n("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(C=>{C.value==!0?U.delete("deleteUnitType/"+u).then(({data:w})=>{d.value=d.value.filter(S=>S.id!==u),setTimeout(()=>{k.fire({text:n("deletesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}):setTimeout(()=>{k.fire({text:n("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},editrow:u=>{console.log("id",u),i.value=u,I.push({name:"editunitstype",params:{id:u}})},statuschange:(u,C)=>{let w="0";u=="0"?w="1":w="0",U.post("statusUnitType",{status:w,id:C}).then(({data:S})=>{setTimeout(()=>{k.fire({text:n("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{I.go(0)})},2e3)})},archivechange:(u,C)=>{k.fire({title:n("areyousure"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:n("yesarchive"),cancelButtonText:n("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(w=>{if(w.value==!0){let S="0";u=="0"?S="1":S="0",U.post("isDeletedUnitType",{delete:S,id:C}).then(({data:ne})=>{d.value=d.value.filter(q=>q.id!==C),setTimeout(()=>{k.fire({text:n("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}else setTimeout(()=>{k.fire({text:n("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:n("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},showData:u=>{let C=u.target.value;return U.post("archiveUnitsTypes",{val:C}).then(({data:w})=>{d.value=w}).catch(({response:w})=>{})},editid:i,editdata:p,updateItem:()=>{},edittype:o,lang:g}}}),Mt={class:"card"},Nt={class:"card-header border-0 pt-6"},It=e("div",{class:"card-title"},null,-1),Et={class:"card-toolbar"},Rt={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},qt={class:"d-flex flex-wrap my-1"},Lt={class:"m-0"},Wt={class:"symbol symbol-20px me-4",value:"0",selected:""},jt={value:"1"},Ft={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_unittype"},Ht={class:"svg-icon svg-icon-2"},Gt={key:1,class:"d-flex justify-content-end align-items-center","data-kt-customer-table-toolbar":"selected"},zt={class:"fw-bold me-5"},Jt={class:"me-2"},Kt=e("button",{type:"button",class:"btn btn-danger"}," Delete Selected ",-1),Ot=e("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[e("div",{class:"fw-bold me-5"},[e("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),$("Selected ")]),e("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Delete Selected ")],-1),Pt={class:"card-body pt-0"},Qt=["onClick"],Xt=["onClick"],Yt=["onClick"],Zt=["onClick"],xt=["onClick"];function te(t,a,B,y,p,d){const i=f("inline-svg"),o=f("Datatable"),n=f("UnittypeAddNewModal"),g=f("EditUnittypeModal");return b(),h(j,null,[e("div",Mt,[e("div",Nt,[It,e("div",Et,[t.selectedIds.length===0?(b(),h("div",Rt,[e("div",qt,[e("div",Lt,[e("select",{name:"status","data-control":"select2","data-hide-search":"true",class:"form-select form-select-white form-select-sm fw-bold w-150px h-30px w-md-150px h-md-40px mr-2",onChange:a[0]||(a[0]=s=>t.showData(s)),style:{"margin-right":"20px","margin-left":"20px"}},[e("option",Wt,l(t.translate("active")),1),e("option",jt,l(t.translate("archive")),1)],32)])]),e("button",Ft,[e("span",Ht,[c(i,{src:"/media/icons/duotune/arrows/arr075.svg"})]),$(" "+l(t.translate("addunittype")),1)])])):(b(),h("div",Gt,[e("div",zt,[e("span",Jt,l(t.selectedIds.length),1),$("Selected ")]),Kt])),Ot])]),e("div",Pt,[c(o,{data:t.tableData,header:t.tableHeader,"enable-items-per-page-dropdown":!0},W({id:v(({row:s})=>[$(l(s.id),1)]),status:v(({row:s})=>[s.status==1?(b(),h("i",{key:0,class:"fa fa-unlock text-success fs-3","aria-hidden":"true",onClick:_=>t.statuschange(s.status,s.id)},null,8,Qt)):(b(),h("i",{key:1,class:"fa fa-lock text-danger fs-3","aria-hidden":"true",onClick:_=>t.statuschange(s.status,s.id)},null,8,Xt))]),action:v(({row:s})=>[e("i",{class:"fa fa-archive text-warning fs-3 m-2","aria-hidden":"true",onClick:_=>t.archivechange(s.is_deleted,s.id)},null,8,Yt),e("i",{class:"fa fa-pencil text-primary fs-3 m-2","aria-hidden":"true",onClick:_=>t.editrow(s.id)},null,8,Zt),e("i",{class:"fa fa-trash text-danger fs-3 m-2","aria-hidden":"true",onClick:_=>t.deleterow(s.id)},null,8,xt)]),_:2},[t.lang==="ar"?{name:"type",fn:v(({row:s})=>[$(l(s.type),1)]),key:"0"}:{name:"type",fn:v(({row:s})=>[$(l(s.type_en),1)]),key:"1"}]),1032,["data","header"])])]),c(n,{items:t.tableData},null,8,["items"]),c(g,{items:t.tableData,id:t.editid,edittype:t.edittype,editdata:t.editdata,onUpdate:t.updateItem},null,8,["items","id","edittype","editdata","onUpdate"])],64)}const de=N(At,[["render",te]]);export{de as default};
