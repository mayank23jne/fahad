import{D as y}from"./KTDataTable.c04eda30.js";import"./Dropdown3.vue_vue_type_script_lang.c4c01141.js";import{d as F,ab as N,r as o,o as V,G as p,V as E,_ as T,k,l as a,m as b,y as s,F as L,p as C,n as P,H as r,I as i}from"./index.40c6202a.js";import{c as W}from"./customers.e552c072.js";import{a as A}from"./index.30a6773f.js";const B=F({name:"unitsstatusreport",props:["t_id","text"],components:{Datatable:y,Field:N},setup(t){console.log("props",t);const n=o([{columnName:"\u0627\u0644\u0646\u0645\u0648\u0630\u062C",columnLabel:"Template_Title",sortEnabled:!0,columnWidth:150},{columnName:"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C",columnLabel:"Template_Detail",sortEnabled:!0,columnWidth:150},{columnName:"\u0631\u0642\u0645 \u0627\u0644\u0648\u062D\u062F\u0629 ",columnLabel:"unit_number",sortEnabled:!0,columnWidth:150},{columnName:"\u0627\u0644\u062C\u0646\u0633\u064A\u0629 ",columnLabel:"nationality",sortEnabled:!0,columnWidth:150},{columnName:"\u0639\u062F\u062F \u0627\u0644\u062D\u062C\u0627\u062C",columnLabel:"pilgrims",sortEnabled:!0,columnWidth:150},{columnName:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0646\u062C\u0627\u062D",columnLabel:"SuccessPercentage",sortEnabled:!0,columnWidth:150},{columnName:"\u0646\u0633\u0628\u0629 \u0627\u0644\u062E\u0637\u0627",columnLabel:"FailedPercentage",sortEnabled:!0,columnWidth:150},{columnName:"\u0627\u0644\u062D\u062F\u062B",columnLabel:"actions",sortEnabled:!0,columnWidth:150},{columnName:"\u0627\u0644\u0637\u0628\u0627\u0639\u0629 ",columnLabel:"print",sortEnabled:!0,columnWidth:150}]),_=o(W),v=o([]),g=o(""),h=o(""),l=o([]),m=o(1),e=o(0),c=o(0),d=o(!0),f=o(""),D=o(""),$=o("");return V(()=>{console.log("my prop",t),t.text=="company"?p.get(`companyForms/${t.t_id}?page=${m.value}&sortDesc=${d.value}`).then(({data:u})=>{l.value=u.data,e.value=u.Count,c.value=15}):t.text==="template"?p.get(`templateForms/${t.t_id}?page=${m.value}&sortDesc=${d.value}`).then(({data:u})=>{l.value=u.data,e.value=u.Count,c.value=15}):p.get(`units_status?page=${m.value}&sortDesc=${d.value}`).then(({data:u})=>{l.value=u.data,e.value=u.Count,c.value=15})}),{items:l,tableHeader:n,selectedIds:v,title:g,detail:h,tableData:_,gotopage:u=>{E.push({name:"success",params:{id:u}})},gotoprint:u=>{window.open(`https://forms.innovativeideasbox.com/API/api/print/${u}`,"_blank")},client_name:f,unit_number:D,template_name:$,searchresults:()=>{p.get(`units_status?page=${m.value}&sortDesc=${d.value}&template_name=${$.value}&client_name=${f.value}&unit_number=${D.value}`).then(u=>{l.value=u.data,e.value=u.data.Count,c.value=15})},sort:u=>{const w=u.order==="asc";u.label&&A(_.value,u.label,{reverse:w})}}}}),S={class:"card mb-8"},H={class:"card-body"},I={class:"row"},U={class:"col-md-3"},O={class:"col-md-3"},G={class:"col-md-3"},M={class:"col-md-3 text-center"},R={class:"card"},j={class:"card-body pt-6"},q=["onClick"],x=["onClick"];function z(t,n,_,v,g,h){const l=C("Field"),m=C("Datatable");return P(),k(L,null,[a("div",S,[a("div",H,[a("div",I,[a("div",U,[b(l,{type:"text",class:"form-control form-control-solid",name:"firstName",modelValue:t.template_name,"onUpdate:modelValue":n[0]||(n[0]=e=>t.template_name=e),placeholder:"\u0627\u0644\u0628\u062D\u062B \u0628 \u0627\u0633\u0645 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"},null,8,["modelValue"])]),a("div",O,[b(l,{type:"text",class:"form-control form-control-solid",name:"firstName",modelValue:t.unit_number,"onUpdate:modelValue":n[1]||(n[1]=e=>t.unit_number=e),placeholder:"\u0627\u0644\u0628\u062D\u062B \u0628\u0631\u0642\u0645 \u0627\u0644\u0648\u062D\u062F\u0629"},null,8,["modelValue"])]),a("div",G,[b(l,{type:"text",class:"form-control form-control-solid",name:"firstName",modelValue:t.client_name,"onUpdate:modelValue":n[2]||(n[2]=e=>t.client_name=e),placeholder:"\u0627\u0644\u0628\u062D\u062B \u0628\u0627\u0633\u0645 \u0627\u0644\u0645\u0641\u062A\u0634"},null,8,["modelValue"])]),a("div",M,[a("button",{class:"btn btn-primary",onClick:n[3]||(n[3]=(...e)=>t.searchresults&&t.searchresults(...e))},"\u0628\u062D\u062B")])])])]),a("div",R,[a("div",j,[b(m,{onOnSort:t.sort,data:t.items,header:t.tableHeader,"enable-items-per-page-dropdown":!0},{Template_Title:s(({row:e})=>[r(i(e.Template_Title),1)]),Template_Detail:s(({row:e})=>[r(i(e.Template_Detail),1)]),unit_number:s(({row:e})=>[r(i(e.unit_number),1)]),nationality:s(({row:e})=>[r(i(e.nationality),1)]),pilgrims:s(({row:e})=>[r(i(e.pilgrims),1)]),SuccessPercentage:s(({row:e})=>[r(i(e.SuccessPercentage),1)]),FailedPercentage:s(({row:e})=>[r(i(e.FailedPercentage),1)]),actions:s(({row:e})=>[a("button",{onClick:c=>t.gotopage(e.answer_id),class:"btn btn-sm btn-light btn-active-light-primary"},"\u062A\u0641\u0627\u0635\u064A\u0644 ",8,q)]),print:s(({row:e})=>[a("button",{onClick:c=>t.gotoprint(e.answer_id),class:"btn btn-sm btn-light btn-active-light-primary"},"\u0637\u0628\u0627\u0639\u0629 ",8,x)]),_:1},8,["onOnSort","data","header"])])])],64)}const oe=T(B,[["render",z]]);export{oe as default};
