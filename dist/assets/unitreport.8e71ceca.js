import{D as k}from"./KTDataTable.c04eda30.js";import{D}from"./Dropdown3.867f282e.js";import{d as N,r as i,u as $,o as y,G as C,V as g,_ as E,k as L,l as r,I as a,m as S,y as s,q as W,p as I,n as V,H as l}from"./index.40c6202a.js";import{c as A}from"./customers.e552c072.js";import"./Dropdown3.vue_vue_type_script_lang.c4c01141.js";const B=N({name:"unitreport",props:["id"],components:{Datatable:k,Dropdown3:D},setup(t){const u=i([{columnName:"thedate",columnLabel:"created_at",sortEnabled:!0,columnWidth:150},{columnName:"theuser",columnLabel:"user",sortEnabled:!0,columnWidth:150},{columnName:"permitno",columnLabel:"permissions",sortEnabled:!0,columnWidth:150},{columnName:"buildingn",columnLabel:"building_number",sortEnabled:!0,columnWidth:150},{columnName:"theevent",columnLabel:"actions",sortEnabled:!0,columnWidth:150},{columnName:"printing",columnLabel:"print",sortEnabled:!0,columnWidth:150},{columnName:"amendment",columnLabel:"edit",sortEnabled:!0,columnWidth:150}]),b=i(A),p=i([]),m=i(""),h=i(""),d=i([]),e=i(!1),{t:c,te:v}=$(),f=n=>v(n)?c(n):n;return y(()=>{localStorage.getItem("permissions").indexOf(1)!==-1&&(e.value=!0);let w=t.id;C.get(`showDetailedAns/${w}`).then(({data:_})=>{m.value=_.title,d.value=_.data.map((o,Q)=>({id:o.id,created_at:new Date(o.created_at).toLocaleString(),user:`${o.user[0].firstname} ${o.user[0].lastname}`,nationality:o.nationality,pilgrims:o.pilgrims,permissions:o.permissions,unit_number:o.unit_number,building_number:o.building_number}))})}),{items:d,tableHeader:u,selectedIds:p,title:m,detail:h,tableData:b,gotoedit:n=>{g.push({name:"editlist",params:{id:t.id,template_id:n}})},gotopage:n=>{g.push({name:"success",params:{id:n}})},gotoprint:n=>{window.open(`https://forms.innovativeideasbox.com/API/api/print/${n}`,"_blank")},translate:f}}}),H={class:"card"},x={class:"card-header border-0 pt-6"},j={class:"card-title text-center"},q={class:"text-center"},G=W('<div class="card-toolbar"><div class="d-flex justify-content-end align-items-center d-none" data-kt-customer-table-toolbar="selected"><div class="fw-bold me-5"><span class="me-2" data-kt-customer-table-select="selected_count"></span>Selected </div><button type="button" class="btn btn-danger" data-kt-customer-table-select="delete_selected"> Delete Selected </button></div></div>',1),M={class:"card-body pt-0"},O=["onClick"],P=["onClick"],T=["onClick"];function z(t,u,b,p,m,h){const d=I("Datatable");return V(),L("div",H,[r("div",x,[r("div",j,[r("h1",q,a(t.title),1)]),G]),r("div",M,[S(d,{data:t.items,header:t.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id"},{created_at:s(({row:e})=>[l(a(e.created_at),1)]),user:s(({row:e})=>[l(a(e.user),1)]),date:s(({row:e})=>[l(a(e.date),1)]),permissions:s(({row:e})=>[l(a(e.permissions),1)]),building_number:s(({row:e})=>[l(a(e.building_number),1)]),actions:s(({row:e})=>[r("button",{onClick:c=>t.gotopage(e.id),class:"btn btn-sm btn-light btn-active-light-primary"},a(t.translate("details")),9,O)]),print:s(({row:e})=>[r("button",{onClick:c=>t.gotoprint(e.id),class:"btn btn-sm btn-light btn-active-light-primary"},a(t.translate("print")),9,P)]),edit:s(({row:e})=>[r("button",{onClick:c=>t.gotoedit(e.id),class:"btn btn-sm btn-light btn-active-light-primary"},a(t.translate("amendment")),9,T)]),_:1},8,["data","header"])])])}const ee=E(B,[["render",z]]);export{ee as default};
