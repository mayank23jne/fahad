import{d as $,ac as A,ab as B,aA as C,u as N,r as _,o as D,G as v,V as E,_ as M,k as m,l as e,m as t,y as g,p as V,n as u,I as a,F as h,J as k,H as I}from"./index.40c6202a.js";import{S as j}from"./sweetalert2.all.fbc178e9.js";import{c as G,a as w}from"./object.fb242430.js";const H=$({name:"units",props:["id"],components:{ErrorMessage:A,Field:B,VForm:C},setup(s){const{t:l,te:q}=N(),p=_(null),i=_({id:0,unit_id:"",building_number:"",building_name:"",representative:"",permissions:"",client_id:"",unitType_id:"",image:"",company:""}),S=localStorage.getItem("lang"),d=_({id:0,fullName:""}),r=_(),b=_(),o=n=>q(n)?l(n):n,T=G().shape({building_number:w().required(o("buildingreq")),building_name:w().required(o("buildingnamereq")),client_id:w().required(o("clientreq")),type:w().required(o("typereq"))});D(()=>{v.get("showUnitTypes").then(({data:n})=>{r.value=n}),v.get("showCompanies").then(({data:n})=>{b.value=n.data}),v.get("showClients").then(({data:n})=>{d.value=n.data.map(f=>({fullName:`${f.firstname} ${f.lastname}`,id:f.id}))}),s.id&&v.get(`ShowUnitDetail/${s.id}`).then(({data:n})=>{i.value=n})});const U=()=>{p.value&&(p.value.setAttribute("data-kt-indicator","on"),setTimeout(()=>{var n;(n=p.value)==null||n.removeAttribute("data-kt-indicator")},2e3))},F=(n,{resetForm:f})=>{if(p.value){p.value.setAttribute("data-kt-indicator","on");const c=new FormData;s.id&&c.append("id",s.id),c.append("bulding_number",i.value.building_number),c.append("bulding_name",i.value.building_name),c.append("representative",i.value.representative),c.append("declaration",i.value.permissions),c.append("client_id",i.value.client_id===null?"":i.value.client_id),c.append("unitType_id",i.value.unitType_id),c.append("image",i.value.image===null?"":i.value.image),c.append("company",i.value.company),v.post("createUnit",c).then(({data:y})=>{setTimeout(()=>{j.fire({text:o("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:o("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{f(),E.push({name:"unitsupdate"})})},2e3)}),setTimeout(()=>{var y;(y=p.value)==null||y.removeAttribute("data-kt-indicator")},2e3)}};return _(""),{submitButton1:p,saveChanges1:U,newclient:i,units:r,clientname:d,compaines:b,formSubmit:F,profileDetailsValidator:T,translate:o,lang:S}}});const J={class:"card mb-5 mb-xl-10"},L={id:"kt_account_profile_details",class:"collapse show"},z={class:"card-body border-top p-9"},K={class:"row mb-6"},O={class:"col-lg-4 col-form-label required fw-semobold fs-6"},P={class:"col-lg-8 fv-row"},Q={class:"fv-plugins-message-container"},R={class:"fv-help-block"},W={class:"row mb-6"},X={class:"col-lg-4 col-form-label required fw-semobold fs-6"},Y={class:"col-lg-8 fv-row"},Z={class:"fv-plugins-message-container"},x={class:"fv-help-block"},ee={class:"row mb-6"},se={class:"col-lg-4 col-form-label fw-semobold fs-6"},oe={class:"required"},le={class:"col-lg-8 fv-row"},te=["value"],ne={class:"fv-plugins-message-container"},ae={class:"fv-help-block"},ie={class:"row mb-6"},de={class:"col-lg-4 col-form-label fw-semobold fs-6"},re={class:"col-lg-8 fv-row"},ce={class:"fv-plugins-message-container"},me={class:"fv-help-block"},ue={class:"row mb-6"},pe={class:"col-lg-4 col-form-label fw-semobold fs-6"},_e={class:"col-lg-8 fv-row"},fe={class:"fv-plugins-message-container"},ve={class:"fv-help-block"},be={class:"row mb-6"},ge={class:"col-lg-4 col-form-label fw-semobold fs-6"},he={class:""},we={class:"col-lg-8 fv-row"},ye=["value"],Ve={class:"fv-plugins-message-container"},ke={class:"fv-help-block"},qe={class:"row mb-6"},Se={class:"col-lg-4 col-form-label required fw-semobold fs-6"},Te={class:"col-lg-8 fv-row"},Ue=["value"],Fe=["value"],$e={class:"fv-plugins-message-container"},Ae={class:"fv-help-block"},Be={class:"row mb-6"},Ce={class:"col-lg-4 col-form-label fw-semobold fs-6"},Ne={class:"col-lg-8 fv-row"},De={class:"fv-plugins-message-container"},Ee={class:"fv-help-block"},Me={class:"card-footer d-flex justify-content-end py-6 px-9"},Ie={type:"reset",class:"btn btn-light btn-active-light-primary me-2"},je={type:"submit",id:"kt_account_profile_details_submit",ref:"submitButton1",class:"btn btn-primary"},Ge={class:"indicator-label"},He={class:"indicator-progress"},Je=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Le(s,l,q,p,i,S){const d=V("Field"),r=V("ErrorMessage"),b=V("VForm");return u(),m("div",J,[e("div",L,[t(b,{id:"kt_account_profile_details_form",class:"form",novalidate:"",onSubmit:s.formSubmit,"validation-schema":s.profileDetailsValidator},{default:g(()=>[e("div",z,[e("div",K,[e("label",O,a(s.translate("buildingno")),1),e("div",P,[t(d,{type:"text",name:"building_number",class:"form-control form-control-lg required form-control-solid",placeholder:s.translate("buildingno"),modelValue:s.newclient.building_number,"onUpdate:modelValue":l[0]||(l[0]=o=>s.newclient.building_number=o)},null,8,["placeholder","modelValue"]),e("div",Q,[e("div",R,[t(r,{name:"building_number"})])])])]),e("div",W,[e("label",X,a(s.translate("buildingname")),1),e("div",Y,[t(d,{type:"text",name:"building_name",class:"form-control form-control-lg required form-control-solid",placeholder:s.translate("buildingname"),modelValue:s.newclient.building_name,"onUpdate:modelValue":l[1]||(l[1]=o=>s.newclient.building_name=o)},null,8,["placeholder","modelValue"]),e("div",Z,[e("div",x,[t(r,{name:"building_name"})])])])]),e("div",ee,[e("label",se,[e("span",oe,a(s.translate("buidling_owner")),1)]),e("div",le,[t(d,{as:"select",name:"client_id",class:"form-select form-select-solid form-select-lg fw-semobold",options:s.clientname,modelValue:s.newclient.client_id,"onUpdate:modelValue":l[2]||(l[2]=o=>s.newclient.client_id=o)},{default:g(()=>[(u(!0),m(h,null,k(s.clientname,o=>(u(),m("option",{key:o.id,value:o.id},a(o.fullName),9,te))),128))]),_:1},8,["options","modelValue"]),e("div",ne,[e("div",ae,[t(r,{name:"client_id"})])])])]),e("div",ie,[e("label",de,a(s.translate("representative")),1),e("div",re,[t(d,{type:"text",name:"representative",class:"form-control form-control-lg form-control-solid",placeholder:s.translate("representative"),modelValue:s.newclient.representative,"onUpdate:modelValue":l[3]||(l[3]=o=>s.newclient.representative=o)},null,8,["placeholder","modelValue"]),e("div",ce,[e("div",me,[t(r,{name:"representative"})])])])]),e("div",ue,[e("label",pe,a(s.translate("permitno")),1),e("div",_e,[t(d,{type:"text",name:"permissions",class:"form-control form-control-lg form-control-solid",placeholder:s.translate("permitno"),modelValue:s.newclient.permissions,"onUpdate:modelValue":l[4]||(l[4]=o=>s.newclient.permissions=o)},null,8,["placeholder","modelValue"]),e("div",fe,[e("div",ve,[t(r,{name:"permissions"})])])])]),e("div",be,[e("label",ge,[e("span",he,a(s.translate("selectcontractor")),1)]),e("div",we,[t(d,{as:"select",name:"company",class:"form-select form-select-solid form-select-lg fw-semobold",modelValue:s.newclient.company,"onUpdate:modelValue":l[5]||(l[5]=o=>s.newclient.company=o),options:s.compaines},{default:g(()=>[(u(!0),m(h,null,k(s.compaines,o=>(u(),m("option",{key:o.id,value:o.id},a(o.company_name),9,ye))),128))]),_:1},8,["modelValue","options"]),e("div",Ve,[e("div",ke,[t(r,{name:"company"})])])])]),e("div",qe,[e("label",Se,a(s.translate("typeunits")),1),e("div",Te,[t(d,{as:"select",name:"type",class:"form-select form-select-solid form-select-lg",modelValue:s.newclient.unitType_id,"onUpdate:modelValue":l[6]||(l[6]=o=>s.newclient.unitType_id=o),options:s.units},{default:g(()=>[(u(!0),m(h,null,k(s.units,o=>(u(),m(h,{key:o.id},[s.lang=="en"||s.lang=="enrtl"?(u(),m("option",{key:0,value:o.id},a(o.type_en),9,Ue)):(u(),m("option",{key:1,value:o.id},a(o.type),9,Fe))],64))),128))]),_:1},8,["modelValue","options"]),e("div",$e,[e("div",Ae,[t(r,{name:"type"})])])])]),e("div",Be,[e("label",Ce,a(s.translate("uploadfile")),1),e("div",Ne,[t(d,{type:"file",name:"image",accept:"image/*",ref:"file",class:"form-control form-control-lg form-control-solid",placeholder:"image",modelValue:s.newclient.image,"onUpdate:modelValue":l[7]||(l[7]=o=>s.newclient.image=o)},null,8,["modelValue"]),e("div",De,[e("div",Ee,[t(r,{name:"image"})])])])])]),e("div",Me,[e("button",Ie,a(s.translate("cancel")),1),e("button",je,[e("span",Ge,a(s.translate("save")),1),e("span",He,[I(a(s.translate("pleasewait"))+" ",1),Je])],512)])]),_:1},8,["onSubmit","validation-schema"])])])}const Pe=M(H,[["render",Le]]);export{Pe as default};
