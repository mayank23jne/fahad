import{D as R}from"./KTDataTable.c04eda30.js";import{u as q}from"./survey.6b7b571f.js";import{h as F}from"./dom.d7d6c49b.js";import{S as f}from"./sweetalert2.all.fbc178e9.js";import{d as V,r as i,u as D,G as T,_ as N,k as g,l as s,I as o,m as c,y as b,ae as H,p as v,n as y,H as B,B as A,o as L,V as x,ax as W,F as j}from"./index.40c6202a.js";const O=V({name:"add-inspectiontype-modal",components:{},props:["inspectiontype"],setup(t,{emit:a}){const d=i(null),k=i(null),h=i(!1);i(!1);const w=localStorage.getItem("logged_user_id"),{t:m,te:p}=D(),r=$=>p($)?m($):$,e=i({name_en:"",name_ar:""}),l=i({name_ar:[{required:!0,message:r("name_ar_req"),trigger:"change"}]});return{newItem:e,rules:l,submit:()=>{!d.value||(t.inspectiontype,d.value.validate($=>{$&&(h.value=!0,T.post("createInspectionType",{name_en:e.value.name_en,name_ar:e.value.name_ar,user_id:w}).then(({data:S})=>{t.inspectiontype.push({id:S.id,name_ar:e.value.name_ar,name_en:e.value.name_en,user_id:w,is_deleted:"0",status:"1"}),setTimeout(()=>{var C;h.value=!1,(C=d.value)==null||C.resetFields(),e.value={name_ar:"",name_en:""},f.fire({text:r("savesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:r("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{F(k.value)})},2e3)}).catch(({response:S})=>{}))}))},formRef:d,loading:h,addInspectionTypeModalRef:k,translate:r}}}),U={class:"modal fade",id:"kt_modal_add_inspectiontype",ref:"addInspectionTypeModalRef",tabindex:"-1","aria-hidden":"true"},G={class:"modal-dialog modal-dialog-centered mw-650px"},z={class:"modal-content"},J={class:"modal-header",id:"kt_modal_add_customer_header"},K={class:"fw-bold"},P={id:"kt_modal_add_inspectiontype_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Q={class:"svg-icon svg-icon-1"},X={class:"modal-body py-10 px-lg-17"},Y={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_industrytype_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_inspectiontype_header","data-kt-scroll-wrappers":"#kt_modal_add_inspectiontype_scroll","data-kt-scroll-offset":"300px"},Z={class:"fv-row mb-7"},ee={class:"required fs-6 fw-semobold mb-2"},te={class:"fv-row mb-7"},se={class:"fs-6 fw-semobold mb-2"},ne={class:"modal-footer flex-center"},ae={type:"reset",id:"kt_modal_add_inspectiontype_cancel",class:"btn btn-light me-3"},oe=["data-kt-indicator"],le={key:0,class:"indicator-label"},ie={class:"svg-icon svg-icon-3 ms-2 me-0"},re={key:1,class:"indicator-progress"},ce=s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function de(t,a,d,k,h,w){const m=v("inline-svg"),p=v("el-input"),r=v("el-form-item"),e=v("el-form");return y(),g("div",U,[s("div",G,[s("div",z,[s("div",J,[s("h2",K,o(t.translate("addinspectiontype")),1),s("div",P,[s("span",Q,[c(m,{src:"/media/icons/duotune/arrows/arr061.svg"})])])]),c(e,{onSubmit:a[2]||(a[2]=H(l=>t.submit(),["prevent"])),model:t.newItem,rules:t.rules,ref:"formRef"},{default:b(()=>[s("div",X,[s("div",Y,[s("div",Z,[s("label",ee,o(t.translate("name"))+"("+o(t.translate("arabic"))+")",1),c(r,{prop:"name_ar"},{default:b(()=>[c(p,{modelValue:t.newItem.name_ar,"onUpdate:modelValue":a[0]||(a[0]=l=>t.newItem.name_ar=l),type:"text",name:"name_ar",placeholder:""},null,8,["modelValue"])]),_:1})]),s("div",te,[s("label",se,o(t.translate("name"))+"("+o(t.translate("english"))+")",1),c(r,{prop:"name_en"},{default:b(()=>[c(p,{modelValue:t.newItem.name_en,"onUpdate:modelValue":a[1]||(a[1]=l=>t.newItem.name_en=l),type:"text",name:"name_en",placeholder:""},null,8,["modelValue"])]),_:1})])])]),s("div",ne,[s("button",ae,o(t.translate("cancel")),1),s("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?A("",!0):(y(),g("span",le,[B(o(t.translate("save"))+" ",1),s("span",ie,[c(m,{src:"/media/icons/duotune/arrows/arr064.svg"})])])),t.loading?(y(),g("span",re,[B(o(t.translate("pleasewait"))+" ",1),ce])):A("",!0)],8,oe)])]),_:1},8,["model","rules"])])])],512)}const ue=N(O,[["render",de]]),me=V({name:"inspectiontype",components:{Datatable:R,InspectionTypeAddNewModal:ue},setup(){const t=i([{columnName:"name",columnLabel:"name",sortEnabled:!0,columnWidth:175},{columnName:"status",columnLabel:"status",sortEnabled:!0,columnWidth:50},{columnName:"action",columnLabel:"action",sortEnabled:!0,columnWidth:157}]),a=i([]);i(!0);const d=i([]),k=localStorage.getItem("lang"),h=i([]),w=i("");q();const m=localStorage.getItem("logged_user_id"),{t:p,te:r}=D(),e=n=>r(n)?p(n):n;return L(()=>T.get("showAllInspectionTypes").then(({data:n})=>{a.value=n}).catch(({response:n})=>{})),{lang:k,selectedItems:h,inspectiontype:a,selectedIds:d,onItemSelect:n=>{d.value=n},tableHeader:t,translate:e,deleterow:n=>{f.fire({title:e("areyousure"),text:e("notretrivedata"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:e("yesdelete"),cancelButtonText:e("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(_=>{_.value==!0?T.delete("deleteInspectionType/"+n).then(({data:u})=>{a.value=a.value.filter(I=>I.id!==n),setTimeout(()=>{f.fire({text:e("deletesuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)}):setTimeout(()=>{f.fire({text:e("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},editrow:n=>{x.push({name:"editinspectiontype",params:{id:n}})},edit_id:w,statuschange:(n,_)=>{let u="0";n=="0"?u="1":u="0",T.post("statusInspectionType",{status:u,id:_}).then(({data:I})=>{setTimeout(()=>{f.fire({text:e("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{x.go(0)})},2e3)})},archivechange:(n,_)=>{f.fire({title:e("areyousure"),icon:"warning",buttonsStyling:!1,showCancelButton:!0,confirmButtonText:e("yesarchive"),cancelButtonText:e("nocancel"),heightAuto:!1,customClass:{confirmButton:"btn btn-danger m-2",cancelButton:"btn btn-primary m-2"}}).then(u=>{if(u.value==!0){let I="0";n=="0"?I="1":I="0",T.post("isDeletedInspectionType",{delete:I,id:_}).then(({data:Ne})=>{a.value=a.value.filter(E=>E.id!==_),setTimeout(()=>{f.fire({text:e("savedsuccess"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})}else setTimeout(()=>{f.fire({text:e("cancelerror"),icon:"success",buttonsStyling:!1,confirmButtonText:e("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{})},2e3)})},showData:n=>{let _=n.target.value;return T.post("archiveInspectionType",{val:_,user_id:m}).then(({data:u})=>{a.value=u}).catch(({response:u})=>{})}}}}),pe={class:"card"},_e={class:"card-header border-0 pt-6"},fe=s("div",{class:"card-title"},null,-1),he={class:"card-toolbar"},ge={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},be={class:"d-flex flex-wrap my-1"},ve={class:"m-0"},ye={class:"symbol symbol-20px me-4",value:"0",selected:""},ke={value:"1"},we={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_inspectiontype"},$e={class:"svg-icon svg-icon-2"},Ie=s("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[s("div",{class:"fw-bold me-5"},[s("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),B("Selected ")]),s("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Delete Selected ")],-1),Te={class:"card-body pt-0"},Be=["onClick"],Se=["onClick"],Ce=["onClick"],Ae=["onClick"],xe=["onClick"];function Ve(t,a,d,k,h,w){const m=v("inline-svg"),p=v("Datatable"),r=v("InspectionTypeAddNewModal");return y(),g(j,null,[s("div",pe,[s("div",_e,[fe,s("div",he,[t.selectedIds.length===0?(y(),g("div",ge,[s("div",be,[s("div",ve,[s("select",{name:"status","data-control":"select2","data-hide-search":"true",class:"form-select form-select-white form-select-sm fw-bold w-150px h-30px w-md-150px h-md-40px mr-2",onChange:a[0]||(a[0]=e=>t.showData(e)),style:{"margin-right":"20px","margin-left":"20px"}},[s("option",ye,o(t.translate("active")),1),s("option",ke,o(t.translate("archive")),1)],32)])]),s("button",we,[s("span",$e,[c(m,{src:"/media/icons/duotune/arrows/arr075.svg"})]),B(" "+o(t.translate("addnew")),1)])])):A("",!0),Ie])]),s("div",Te,[c(p,{onOnItemsSelect:t.onItemSelect,data:t.inspectiontype,header:t.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id"},W({status:b(({row:e})=>[e.status==1?(y(),g("i",{key:0,class:"fa fa-unlock text-success fs-3","aria-hidden":"true",onClick:l=>t.statuschange(e.status,e.id)},null,8,Be)):(y(),g("i",{key:1,class:"fa fa-lock text-danger fs-3","aria-hidden":"true",onClick:l=>t.statuschange(e.status,e.id)},null,8,Se))]),action:b(({row:e})=>[s("i",{class:"fa fa-archive text-warning fs-3 m-2","aria-hidden":"true",onClick:l=>t.archivechange(e.is_deleted,e.id)},null,8,Ce),s("i",{class:"fa fa-pencil text-primary fs-3 m-2","aria-hidden":"true",onClick:l=>t.editrow(e.id)},null,8,Ae),s("i",{class:"fa fa-trash text-danger fs-3 m-2","aria-hidden":"true",onClick:l=>t.deleterow(e.id)},null,8,xe)]),_:2},[t.lang=="en"||t.lang=="enrtl"?{name:"name",fn:b(({row:e})=>[B(o(e.name_en),1)]),key:"0"}:{name:"name",fn:b(({row:e})=>[B(o(e.name_ar),1)]),key:"1"}]),1032,["onOnItemsSelect","data","header"])])]),c(r,{inspectiontype:t.inspectiontype},null,8,["inspectiontype"])],64)}const He=N(me,[["render",Ve]]);export{He as default};
