import{d as g,ac as y,ab as k,aA as V,u as $,r as d,G as w,_ as B,k as S,l as s,m as _,y as A,p as f,n as C,I as c,H as F}from"./index.40c6202a.js";import{S as h}from"./sweetalert2.all.fbc178e9.js";import{c as T,a as I}from"./object.fb242430.js";const D=g({name:"password",components:{ErrorMessage:y,Field:k,VForm:V},setup(e){const{t:r,te:b}=$(),a=d(null);d([]);const i=d({newpassword:"",id:localStorage.getItem("logged_user_id")}),t=o=>b(o)?r(o):o,p=T().shape({newpassword:I().required(t("newpassreq")).min(6,t("passwordless"))}),m=(o,{resetForm:l})=>{if(a.value){a.value.setAttribute("data-kt-indicator","on");let v=localStorage.getItem("access_token");const u=new FormData;u.append("id",i.value.id),u.append("newpassword",i.value.newpassword),w.vueInstance.axios.defaults.headers.common.Authorization=`Bearer ${v}`,w.post("admin/resetpassword",u).then(({data:n})=>{setTimeout(()=>{h.fire({text:t("passwordsave"),icon:"success",buttonsStyling:!1,confirmButtonText:t("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{l()})},2e3)}).catch(({response:n})=>{n.status===401&&setTimeout(()=>{h.fire({text:t("pleasetry"),icon:"error",buttonsStyling:!1,confirmButtonText:t("okgotit"),heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{l()})},2e3)}),setTimeout(()=>{var n;(n=a.value)==null||n.removeAttribute("data-kt-indicator")},2e3)}};return d(""),{submitButton1:a,saveChanges1:m,password:i,profileDetailsValidator:p}}});const E={class:"card mb-5 mb-xl-10"},q={id:"kt_account_profile_details",class:"collapse show"},x={class:"card-body border-top p-9"},M={class:"row mb-6"},N={class:"col-lg-4 col-form-label required fw-semobold fs-6"},j={class:"col-lg-8"},z={class:"fv-plugins-message-container"},G={class:"fv-help-block"},H={class:"card-footer d-flex justify-content-end py-6 px-9"},U={type:"reset",class:"btn btn-light btn-active-light-primary me-2",id:"discard",name:"discard"},J={type:"submit",id:"kt_account_profile_details_submit",ref:"submitButton1",class:"btn btn-primary"},K={class:"indicator-label"},L={class:"indicator-progress"},O=s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function P(e,r,b,a,i,t){const p=f("Field"),m=f("ErrorMessage"),o=f("VForm");return C(),S("div",E,[s("div",q,[_(o,{id:"kt_account_profile_details_form",class:"form",novalidate:"",onSubmit:e.saveChanges1,"validation-schema":e.profileDetailsValidator},{default:A(()=>[s("div",x,[s("div",M,[s("label",N,c(e.$t("newpass")),1),s("div",j,[_(p,{type:"password",name:"newpassword",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:e.$t("password"),modelValue:e.password.newpassword,"onUpdate:modelValue":r[0]||(r[0]=l=>e.password.newpassword=l)},null,8,["placeholder","modelValue"]),s("div",z,[s("div",G,[_(m,{name:"newpassword"})])])])])]),s("div",H,[s("button",U,c(e.$t("discard")),1),s("button",J,[s("span",K,c(e.$t("save")),1),s("span",L,[F(c(e.$t("pleasewait"))+" ",1),O])],512)])]),_:1},8,["onSubmit","validation-schema"])])])}const X=B(D,[["render",P]]);export{X as default};
